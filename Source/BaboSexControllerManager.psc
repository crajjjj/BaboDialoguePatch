Scriptname BaboSexControllerManager extends Quest  

String file = "../BaboDialogue/BakaStrings.json"

Quest Property BaboMonitorScript Auto
Quest Property BaboReputationScript Auto
Quest Property BaboLoanSharks Auto
Quest Property BaboBadEnd Auto
Quest Property BaboPotionDealer Auto
Quest Property BaboSpectatorScript Auto
Quest Property BaboEventAnimalCare Auto
Quest Property BaboEventAnimalCareMarkarth Auto
Quest Property BaboSpectatorWOEnemyScript Auto
Quest Property BaboWidgetTextController Auto

Quest Property BaboEventWhiterunOrcVisitiors Auto
Quest Property BaboEventWindhelmNewgnisis Auto
Quest Property BaboEventOrcVillage01 Auto
Quest Property BaboEventMogrul Auto
Quest Property BaboEventMarkarthGuard Auto
Quest Property BaboEventDibellaTemplePerk Auto
Quest Property BaboDialogueWhiterun Auto
Quest Property BaboDialogueHirelings Auto

Quest Property BaboChangeLocationEvent01 Auto
Quest Property BaboChangeLocationEvent02 Auto
Quest Property BaboChangeLocationEvent02Coast Auto
Quest Property BaboChangeLocationEvent02Forest Auto
Quest Property BaboChangeLocationEvent02ForestSnow Auto
Quest Property BaboChangeLocationEvent02Marsh Auto
Quest Property BaboChangeLocationEvent02Mountain Auto
Quest Property BaboChangeLocationEvent02MountainSnow Auto
Quest Property BaboChangeLocationEvent02Plain Auto
Quest Property BaboChangeLocationEvent02PlainSnow Auto
Quest Property BaboChangeLocationEvent03 Auto
Quest Property BaboChangeLocationEvent04a Auto
Quest Property BaboChangeLocationEvent05 Auto
Quest Property BaboChangeLocationEvent06 Auto
Quest Property BaboChangeLocationEvent07 Auto
Quest Property BaboChangeLocationEvent08 Auto

Quest Property BaboEncounter01 Auto
Quest Property BaboEncounter02 Auto
Quest Property BaboEncounter03 Auto
Quest Property BaboEncounter04 Auto
Quest Property BaboEncounter05 Auto
Quest Property BaboEncounter06 Auto
Quest Property BaboEncounter07 Auto
Quest Property BaboEncounter08 Auto
Quest Property BaboEncounter09 Auto
Quest Property BaboEncounter10 Auto
Quest Property BaboEncounter11 Auto
Quest Property BaboEncounter12 Auto
Quest Property BaboEncounter13 Auto

Quest Property BaboDialogueCLEvent06 Auto
Quest Property BaboChangeLocationEvent02DLC02 Auto

Quest Property BaboHangingQuest Auto
Quest Property BaboRescuingSlavesScript Auto
Quest Property BaboStealingScript Auto

Quest Property SexLabQuestFramework Auto
Quest Property sla_Framework Auto
SexLabFramework Property SexLab  Auto 
Quest MyQuest
BaboDiaMonitorScript Property BDMScript Auto

GlobalVariable Property BaboSimpleSlavery Auto
GlobalVariable Property BaboGlobalSpectatorSwitch Auto
GlobalVariable Property BaboYamete Auto

Idle Property BaboDefeatedCollapseLoop01 Auto
Idle Property BaboDefeatedPanting01 Auto
;Idle Property BaboKnockOut01Start Auto
Idle Property BaboExhaustedFront01 Auto
Idle Property BaboExhaustedFront02 Auto
Idle Property BaboExhaustedFront03 Auto
Idle Property BaboExhaustedBack01 Auto
Idle Property BaboExhaustedBack02 Auto
Idle Property BaboExhaustedBack03 Auto

Actor Property PlayerRef Auto

Faction Property BanditFaction Auto

Armor Property BaboGagLogBit01 Auto
Armor Property BaboCollarLeatherBinds Auto
Armor Property BaboWristRope01 Auto
Armor Property BaboAnkleRope01 Auto
Armor Property BaboAnkleIronBlack Auto
Armor Property BaboYokeWood01 Auto

Armor Property BaboCumLowerBod1Playable Auto
Armor Property BaboCumMesh1Playable Auto
Armor Property BaboCumUpperBodyPlayable Auto
Armor Property BaboCumVaginaMeshPlayable Auto
Armor Property BaboTearsMesh1Playable Auto

Spell Property BaboCalmSpell Auto

Faction Property BaboHateFaction Auto
Faction Property BaboPlayerFaction Auto
Faction Property BaboPlayerSurrenderFaction Auto
Faction Property BaboHateNPC01Faction Auto
Faction Property BaboHateNPC02Faction Auto

Faction Property BaboDialogueHuggedFaction Auto

Faction Property BaboBigGuySLFaction Auto

BaboDialogueConfigMenu Property BDMCM Auto

ImageSpaceModifier Property FadeToBlackImod  Auto  
ImageSpaceModifier Property FadeToBlackHoldImod  Auto  
ImageSpaceModifier Property FadeToBlackBackImod  Auto  
ImageSpaceModifier Property BaboFadeToBlack  Auto  
ImageSpaceModifier Property BaboFadeToBlackFast  Auto  
ImageSpaceModifier Property BaboFadeToBlackHoldImod  Auto  
ImageSpaceModifier Property BaboFadeToBlackBackImod  Auto  
ImageSpaceModifier Property BaboFadeToBlackBackImodFast  Auto  

Keyword Property BaboSpectatorKeyword Auto
Keyword Property BaboSpectatorWOEnemyKeyword Auto
Keyword Property BaboKidnapKeyword Auto

Keyword Property ActorTypeNPC Auto

ObjectReference Property BaboPosPCRef Auto
ObjectReference Property BaboPosNPCRef Auto
Faction Property BaboNPCAnimating Auto
Package Property DoNothing Auto
Package Property BaboDoNothing Auto

GlobalVariable Property BaboHorribleHarassment Auto
Scene Property BaboKidnapEventDrunkPlayerScene03 Auto
Scene Property BaboKidnapEventDrunkPlayerScene04 Auto
Scene Property BaboEncounter13SceneStart Auto
Scene Property BaboEncounter13SceneBeforeFight Auto
Scene Property BaboEncounter13SceneIgnore Auto
Scene Property BaboEncounter13SceneNoFight Auto
Scene Property BaboEncounter13PayDebt Auto
Scene Property BaboEncounter13SceneDefeated Auto
Scene Property BaboEncounter13SceneAfterSex Auto
Scene Property BaboChangeLocationEvent01Scene01 Auto
Scene Property BaboChangeLocationEvent01Scene02 Auto
Scene Property BaboChangeLocationEvent01Scene03 Auto
Scene Property BaboChangeLocationEvent01Scene04 Auto
Scene Property BaboChangeLocationEvent01Scene05 Auto
Scene Property BaboChangeLocationEvent01Scene06 Auto

Scene Property BaboChangeLocationEvent08AutographScene06 Auto
Scene Property BaboChangeLocationEvent08AutographScene05 Auto
Scene Property BaboChangeLocationEvent08AutographScene04 Auto
Scene Property BaboChangeLocationEvent08AutographScene03 Auto
Scene Property BaboChangeLocationEvent08AutographScene02 Auto
Scene Property BaboChangeLocationEvent08AutographScene01 Auto
Scene Property BaboChangeLocationEvent07SceneWellRested Auto
Scene Property BaboChangeLocationEvent07Scene06 Auto
Scene Property BaboChangeLocationEvent07Scene05 Auto
Scene Property BaboChangeLocationEvent07Scene04 Auto
Scene Property BaboChangeLocationEvent07Scene03 Auto
Scene Property BaboChangeLocationEvent07Scene02 Auto
Scene Property BaboChangeLocationEvent07Scene00 Auto
Scene Property BaboChangeLocationEvent06Scene05 Auto
Scene Property BaboChangeLocationEvent06Scene06 Auto
Scene Property BaboChangeLocationEvent05Scene02 Auto
Scene Property BaboChangeLocationEvent05Scene03 Auto
Scene Property BaboChangeLocationEvent05Scene04 Auto
Scene Property BaboEventMarkarthGuardScene00a Auto
Scene Property BaboEventMarkarthGuardScene00b Auto
Scene Property BaboEventMarkarthGuardScene01 Auto
Scene Property BaboEventMarkarthGuardScene02 Auto
Scene Property BaboKidnapEventYouAreTrappedSnareRopeIMCAfterSex Auto

Scene Property BaboEventAnimalCareMarkarthSceneStart Auto
Scene Property BaboEventAnimalCareMarkarthScene01 Auto
Scene Property BaboEventAnimalCareMarkarthScene02 Auto
Scene Property BaboEventAnimalCareMarkarthScene03 Auto
Scene Property BaboEventAnimalCareMarkarthScene04 Auto
Scene Property BaboEventAnimalCareMarkarthScene05 Auto
Scene Property BaboEventAnimalCareMarkarthScene06 Auto
Scene Property BaboEventAnimalCareMarkarthScene07 Auto

Scene Property BaboChangeLocationEvent02Scene01 Auto
Scene Property BaboChangeLocationEvent02Scene02 Auto
Scene Property BaboChangeLocationEvent02CoastScene01 Auto
Scene Property BaboChangeLocationEvent02ForestScene01 Auto
Scene Property BaboChangeLocationEvent02ForestSnowScene01 Auto
Scene Property BaboChangeLocationEvent02MarshScene01 Auto
Scene Property BaboChangeLocationEvent02MountainScene01 Auto
Scene Property BaboChangeLocationEvent02MountainSnowScene01 Auto
Scene Property BaboChangeLocationEvent02PlainScene01 Auto
Scene Property BaboChangeLocationEvent02PlainSnowScene01 Auto
Scene Property BaboEventAnimalCareSceneHorse01 Auto
Scene Property BaboEncounter01Scene01 Auto
Scene Property BaboEncounter01Scene02 Auto
Scene Property BaboEncounter01Scene03 Auto
Scene Property BaboEncounter01Scene04 Auto
Scene Property BaboEncounter01Scene05 Auto
Scene Property BaboEncounter03Scene01 Auto
Scene Property BaboEncounter03Scene02 Auto
Scene Property BaboEncounter03Scene03 Auto
Scene Property BaboEncounter04Scene01 Auto
Scene Property BaboEncounter04Scene02 Auto
Scene Property BaboEncounter04Scene03 Auto
Scene Property BaboEncounter11Scene01 Auto
Scene Property BaboEncounter11Scene02 Auto
Scene Property BaboEncounter11Scene03 Auto
Scene Property BaboEncounter11Scene04 Auto
Scene Property BaboEncounter05Scene01 Auto
Scene Property BaboEncounter05Scene02 Auto
Scene Property BaboEncounter07Scene01 Auto
Scene Property BaboEncounter07Scene02 Auto
Scene Property BaboEncounter07Scene03 Auto
Scene Property BaboEncounter07Scene04 Auto
Scene Property BaboEncounter07Scene05 Auto
Scene Property BaboEncounter09Scene01 Auto
Scene Property BaboEncounter09Scene02 Auto

Scene Property BaboKidnapEventScenarioLastSex Auto
Scene Property BaboKidnapEventScenario04AfterSex Auto

Quest Property BaboKidnapEvent Auto
Bool Property ControlBool Auto

GlobalVariable Property BaboReputation Auto
GlobalVariable Property BaboReputationBitch Auto
GlobalVariable Property BaboFHU Auto

Sound Property BaboEjaculationInnerMarker Auto
Sound Property BaboEjaculationOuterMarker Auto
Sound Property BaboPunchMarker Auto
Sound Property BaboRopeRustleSoundMarker Auto
Sound Property BaboDoorKnobMarker Auto

Location Property BaboSlaverLocation01 Auto
Location Property BaboSlaverLocation02 Auto
Location Property BaboSlaverLocation03 Auto
Location Property BaboSlaverLocation04 Auto
Location Property BaboSlaverNobleHouseLocation01 Auto
Location Property BaboKidnapperLocation01 Auto
Location Property BaboKidnapperLocation02 Auto
Location Property BaboKidnapperLocation03 Auto
Location Property BaboKidnapperLocation04 Auto
Location Property BaboKidnapperLocationCave Auto
Location Property BaboKidnapperLocationCave02 Auto
Location Property BaboKidnapperLocationCave03 Auto
Location Property BaboKidnapperLocationTower01 Auto
MiscObject Property Gold001 Auto
Armor Property BaboBountyRingSerialKiller Auto

Message Property BaboQTEAtkMess Auto
Message Property BaboQTEStrafeMess Auto

SOS_API Property SOSAPIQuest Auto Hidden
SOS_SetupQuest_Script Property SOS_Quest Auto Hidden
SOS_AddonQuest_Script Property SOS_Addon_VectorPlexusRegular_Quest Auto Hidden
SOS_AddonQuest_Script Property SOS_Addon_VectorPlexusMuscular_Quest Auto Hidden
Race Property BakaGiantOrcRace Auto


GlobalVariable property GameHour auto
GlobalVariable property GameDaysPassed auto
GlobalVariable property BaboPlayerAppearanceValue auto
GlobalVariable property BaboPlayerBreastsValue auto
GlobalVariable property BaboPlayerButtocksValue auto
GlobalVariable property BaboRapeChanceGlobal auto
GlobalVariable Property BaboPlayerAppearanceTotalValue Auto

Faction Property sla_Arousal auto
Faction Property BaboWEAggressiveRapistFaction auto
Faction Property BaboRapistFaction auto
Faction Property BaboBehaviorPatternFaction auto

Keyword Property SLA_ArmorPretty Auto
Keyword Property EroticArmor Auto
Keyword Property SLA_ArmorLewdLeotard Auto
Keyword Property SLA_ArmorSpendex Auto
Keyword Property SLA_ArmorHalfNakedBikini Auto
Keyword Property SLA_ArmorTransparent Auto
Keyword Property SLA_ArmorCurtain Auto
Keyword Property SLA_ArmorHalfNaked Auto
Keyword Property ArmorCuirass Auto
Keyword Property ClothingBody Auto
Form Property sla_NakedArmorList Auto

formlist property BaboEdibleCheapSusFormList auto
formlist property BaboEdibleCheapFormList auto
formlist property BaboStalkerList auto
formlist property BaboChangeLocationEvent08WindhelmList auto

Formlist Property BaboCL08WindhelmStalkerList Auto
Formlist Property BaboCL08RiftenStalkerList Auto
Formlist Property BaboCL08SolitudeStalkerList Auto
Formlist Property BaboCL08BYOH01StalkerList Auto
Formlist Property BaboCL08BYOH02StalkerList Auto
Formlist Property BaboCL08BYOH03StalkerList Auto
Formlist Property BaboCL08RavenRockStalkerList Auto
Formlist Property BaboCL08MiscStalkerList Auto

GlobalVariable Property BaboChangeLocation08FraudWindhelm Auto
GlobalVariable Property BaboChangeLocation08FraudRiften Auto
GlobalVariable Property BaboChangeLocation08FraudSolitude Auto
GlobalVariable Property BaboChangeLocation08FraudBYOH01 Auto
GlobalVariable Property BaboChangeLocation08FraudBYOH02 Auto
GlobalVariable Property BaboChangeLocation08FraudBYOH03 Auto
GlobalVariable Property BaboChangeLocation08Fraudsolstheim Auto
GlobalVariable Property BaboChangeLocation08FraudMIsc Auto


faction property SLAX_AggressiveFaction auto
faction property BaboChangeLocationEvent08FanFaction auto
faction property BaboChangeLocationEvent08Faction auto
faction property BaboHadSexwithPlayerFaction auto
faction property BaboHadRapedPlayerFaction auto


actorbase property BaboEventChangeLocation08Visitor01 auto
objectreference property BaboDumpsterRef auto
GlobalVariable Property BaboChangeLocation08FanWindhelm Auto

GlobalVariable Property BaboChangeLocation08FanRiften Auto
GlobalVariable Property BaboChangeLocation08FanSolitude Auto
GlobalVariable Property BaboChangeLocation08FanBYOH01 Auto
GlobalVariable Property BaboChangeLocation08FanBYOH02 Auto
GlobalVariable Property BaboChangeLocation08FanBYOH03 Auto
GlobalVariable Property BaboChangeLocation08Fansolstheim Auto

GlobalVariable Property BaboChangeLocation08FanCustom01 Auto
GlobalVariable Property BaboChangeLocation08FanCustom02 Auto
GlobalVariable Property BaboChangeLocation08FanCustom03 Auto

formlist Property BaboChangeLocationEvent08RiftenList Auto
formlist Property BaboChangeLocationEvent08SolitudeList Auto
formlist Property BaboChangeLocationEvent08BYOH01List Auto
formlist Property BaboChangeLocationEvent08BYOH02List Auto
formlist Property BaboChangeLocationEvent08BYOH03List Auto
formlist Property BaboChangeLocationEvent08SolstheimList Auto

formlist Property BaboChangeLocationEvent08Custom01List Auto
formlist Property BaboChangeLocationEvent08Custom02List Auto
formlist Property BaboChangeLocationEvent08Custom03List Auto

GlobalVariable Property BaboPrecisionGlobal Auto

Formlist Property BaboTempList Auto
Idle Property StaggerStart Auto

;idle[] property KillmovesWolf
;	idle[] function get()
;		return KillMoveRegister()
;	endFunction
;endproperty


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;\\\\\\\\\\\\\\\\\ Sex Setting Area \\\\\\\\\\\\\\\\\\
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
idle[] Function WolfKillMove()
	idle[] TheKillMove = New Idle[3]
	TheKillMove[0] = (Game.GetFormFromFile(0xF4697, "Skyrim.esm") As Idle) ; Wolf Killmove 2H						PA
	TheKillMove[1] = (Game.GetFormFromFile(0xF4677, "Skyrim.esm") As Idle) ; Wolf Killmove 1H						PA
	TheKillMove[2] = (Game.GetFormFromFile(0xF4678, "Skyrim.esm") As Idle) ; Wolf Killmove 1H						PA
	return TheKillMove
EndFunction

Function AddHadSexFaction(actor[] akactorArray, Bool brape = false)
if akactorArray == None
	return
endIf
int i = akactorArray.length
while i > 1;to exclude player
i -= 1
	if akactorArray[i]
		if brape
			if akactorArray[i].isinfaction(BaboHadRapedPlayerFaction)
				akactorArray[i].setfactionrank(BaboHadRapedPlayerFaction, akactorArray[i].getfactionrank(BaboHadRapedPlayerFaction) + 1)
			else
				akactorArray[i].addtofaction(BaboHadRapedPlayerFaction)
			endif
		else
			if akactorArray[i].isinfaction(BaboHadSexwithPlayerFaction)
				akactorArray[i].setfactionrank(BaboHadSexwithPlayerFaction, akactorArray[i].getfactionrank(BaboHadSexwithPlayerFaction) + 1)
			else
				akactorArray[i].addtofaction(BaboHadSexwithPlayerFaction)
			endif
		endif
	endIf
	
EndWhile
EndFunction

Event OnInit()
	RegisterSexlabHooks()
	SOSSize()
EndEvent

Function PrecisionCheck(Actor akactor, bool switch)
if BaboPrecisionGlobal.getvalue() == 1
	Precision_Utility.ToggleDisableActor(akactor, switch);Precision
endif
EndFunction

Function ExhaustionIdle(actor akactor, string type = "")
int randomi
if type == "Back"
	randomi = Utility.randomint(0, 2)
	if randomi == 1
		akactor.playidle(BaboExhaustedBack02)
	elseif randomi == 2
		akactor.playidle(BaboExhaustedBack03)
	else
		akactor.playidle(BaboExhaustedBack01)
	endif
elseif type == "Front"
	randomi = Utility.randomint(0, 2)
	if randomi == 1
		akactor.playidle(BaboExhaustedFront02)
	elseif randomi == 2
		akactor.playidle(BaboExhaustedFront03)
	else
		akactor.playidle(BaboExhaustedFront01)
	endif
else
	RandomExhaustionIdle(akactor)
endif
EndFunction

Function RandomExhaustionIdle(actor akactor)
int randomi = Utility.randomint(0, 7)
if randomi == 1
	akactor.playidle(BaboExhaustedFront01)
elseif randomi == 2
	akactor.playidle(BaboExhaustedFront02)
elseif randomi == 3
	akactor.playidle(BaboExhaustedFront03)
elseif randomi == 4
	akactor.playidle(BaboExhaustedBack01)
elseif randomi == 5
	akactor.playidle(BaboExhaustedBack02)
elseif randomi == 6
	akactor.playidle(BaboExhaustedBack03)
elseif randomi == 7
	Debug.SendAnimationEvent(akactor, "BaboFaintF")
else
	Debug.SendAnimationEvent(akactor, "BaboFaintFStart")
endif
EndFunction

Function BigguySLReady(actor akactor, bool Ready)
if Ready	
	akactor.setfactionrank(BaboBigGuySLFaction, 1)
else
	if akactor == PlayerRef
		akactor.setfactionrank(BaboBigGuySLFaction, 0)
	else
		akactor.removefromfaction(BaboBigGuySLFaction)
	endif
endif
EndFunction

function RegisterSexlabHooks()
	RegisterForModEvent("HookStageStart", "BSCStart")
	RegisterForModEvent("HookAnimationEnd", "BSCEnd")
endFunction

function UnregisterSexlabHooks()
	UnregisterForModEvent("BSCStart")
	UnregisterForModEvent("BSCEnd")
endFunction

Function StopAllSexlabAnimations()
	(SexLabQuestFramework as sslThreadSlots).stopall()
EndFunction

Function SexCustomActor(Actor Actor01, Actor Actor02, Actor Actor03, Actor Actor04, Actor Actor05, String Tag01, String Tag02, String Tag03, Bool NextScene, String EventRegisterDummy, String EventName, Bool Rape)

	if Actor01 == None || Actor02 == None
		return
	endif
	Actor[] sexActors = MakeActorArray(Actor01, Actor02, Actor03, Actor04, Actor05)
	if sexActors == None
		return
	endif
	Int ActorCount = sexActors.Length
	sslBaseAnimation[] anims
	anims = SexLab.GetAnimationsByTag(ActorCount, Tag01, Tag02, Tag03,  TagSuppress = "Femdom")

	If NextScene
		RegisterForModEvent("AnimationEnd_" + EventRegisterDummy, EventName)
		if Rape
			SexLab.StartSex(sexActors, anims, victim=sexActors[0], hook= EventRegisterDummy)
		else
			SexLab.StartSex(sexActors, anims, hook= EventRegisterDummy)
		endif
	Elseif !NextScene
		if Rape
			SexLab.StartSex(sexActors, anims, victim=sexActors[0])
		else
			SexLab.StartSex(sexActors, anims)
		endif
	EndIf
	if playerref && sexActors[0] && sexActors[0] == playerref
		AddHadSexFaction(sexActors, Rape)
	endif
EndFunction

Function SexCustom(ReferenceAlias ActorRef01, ReferenceAlias ActorRef02, ReferenceAlias ActorRef03, ReferenceAlias ActorRef04, ReferenceAlias ActorRef05, String Tag01, String Tag02, String Tag03, Bool NextScene, String EventRegisterDummy, String EventName, Bool Rape)

	Actor Actor01 = ActorRef01.GetActorReference()
	Actor Actor02 = ActorRef02.GetActorReference()
	Actor Actor03 = ActorRef03.GetActorReference()
	Actor Actor04 = ActorRef04.GetActorReference()
	Actor Actor05 = ActorRef05.GetActorReference()
	if Actor01 == None || Actor02 == None
		return
	endif
	Actor[] sexActors = MakeActorArray(Actor01, Actor02, Actor03, Actor04, Actor05)
	if sexActors == None
		return
	endif
	Int ActorCount = sexActors.Length
	sslBaseAnimation[] anims
	anims = SexLab.GetAnimationsByTag(ActorCount, "Tag01", "Tag02", "Tag03",  TagSuppress = "Femdom")

	If NextScene
		RegisterForModEvent("AnimationEnd_" + EventRegisterDummy, EventName)
		if Rape
			SexLab.StartSex(sexActors, anims, victim=sexActors[0], hook= EventRegisterDummy)
		else
			SexLab.StartSex(sexActors, anims, hook= EventRegisterDummy)
		endif
	else
		if Rape
			SexLab.StartSex(sexActors, anims, victim=sexActors[0])
		else
			SexLab.StartSex(sexActors, anims)
		endif
	EndIf
	if playerref && sexActors[0] && sexActors[0] == playerref
		AddHadSexFaction(sexActors, Rape)
	endif
EndFunction

Function SexCustomActorTag(Actor Actor01, Actor Actor02, Actor Actor03, Actor Actor04, Actor Actor05, String Tag, String SuppressTag, Bool NextScene, String EventRegisterDummy, String EventName, Bool Rape)

	if Actor01 == None || Actor02 == None
		return
	endif
	Actor[] sexActors = MakeActorArray(Actor01, Actor02, Actor03, Actor04, Actor05)
	if sexActors == None
		return
	endif
	Int ActorCount = sexActors.Length
	sslBaseAnimation[] anims
	anims = SexLab.GetAnimationsByTags(ActorCount, Tag, TagSuppress = SuppressTag)
	
	If NextScene
		RegisterForModEvent("AnimationEnd_" + EventRegisterDummy, EventName)
		if Rape
			SexLab.StartSex(sexActors, anims, victim=sexActors[0], hook= EventRegisterDummy)
		else
			SexLab.StartSex(sexActors, anims, hook= EventRegisterDummy)
		endif
	else
		if Rape
			SexLab.StartSex(sexActors, anims, victim=sexActors[0])
		else
			SexLab.StartSex(sexActors, anims)
		endif
	EndIf
	if playerref && sexActors[0] && sexActors[0] == playerref
		AddHadSexFaction(sexActors, Rape)
	endif
EndFunction

Function SexCustomTag(ReferenceAlias ActorRef01, ReferenceAlias ActorRef02, ReferenceAlias ActorRef03, ReferenceAlias ActorRef04, ReferenceAlias ActorRef05, String Tag, String SuppressTag, Bool NextScene, String EventRegisterDummy, String EventName, Bool Rape)

	Actor Actor01 = ActorRef01.GetActorReference()
	Actor Actor02 = ActorRef02.GetActorReference()
	Actor Actor03 = ActorRef03.GetActorReference()
	Actor Actor04 = ActorRef04.GetActorReference()
	Actor Actor05 = ActorRef05.GetActorReference()
	if Actor01 == None || Actor02 == None
		return
	endif
	Actor[] sexActors = MakeActorArray(Actor01, Actor02, Actor03, Actor04, Actor05)
	if sexActors == None
		return
	endif
	Int ActorCount = sexActors.Length
	sslBaseAnimation[] anims
	anims = SexLab.GetAnimationsByTags(ActorCount, Tag, TagSuppress = SuppressTag)
	
	If NextScene
		RegisterForModEvent("AnimationEnd_" + EventRegisterDummy, EventName)
		if Rape
			SexLab.StartSex(sexActors, anims, victim=sexActors[0], hook= EventRegisterDummy)
		else
			SexLab.StartSex(sexActors, anims, hook= EventRegisterDummy)
		endif
	else
		if Rape
			SexLab.StartSex(sexActors, anims, victim=sexActors[0])
		else
			SexLab.StartSex(sexActors, anims)
		endif
	EndIf
	if playerref && sexActors[0] && sexActors[0] == playerref
		AddHadSexFaction(sexActors, Rape)
	endif
EndFunction

Function SexCustombyName(ReferenceAlias ActorRef01, ReferenceAlias ActorRef02, ReferenceAlias ActorRef03, ReferenceAlias ActorRef04, ReferenceAlias ActorRef05, String SLName, Bool NextScene, String EventRegisterDummy, String EventName, Bool Rape)

	Actor Actor01 = ActorRef01.GetActorReference()
	Actor Actor02 = ActorRef02.GetActorReference()
	Actor Actor03 = ActorRef03.GetActorReference()
	Actor Actor04 = ActorRef04.GetActorReference()
	Actor Actor05 = ActorRef05.GetActorReference()
	if Actor01 == None || Actor02 == None
		return
	endif
	Actor[] sexActors = MakeActorArray(Actor01, Actor02, Actor03, Actor04, Actor05)
	if sexActors == None
		return
	endif
	Int ActorCount = sexActors.Length

	sslBaseAnimation[] anims = new sslBaseAnimation[1]
	anims[0] = SexLab.GetAnimationByName(SLName)

	If NextScene
		RegisterForModEvent("AnimationEnd_" + EventRegisterDummy, EventName)
		if Rape
			SexLab.StartSex(sexActors, anims, victim=sexActors[0], hook= EventRegisterDummy)
		else
			SexLab.StartSex(sexActors, anims, hook= EventRegisterDummy)
		endif
	else
		if Rape
			SexLab.StartSex(sexActors, anims, victim=sexActors[0])
		else
			SexLab.StartSex(sexActors, anims)
		endif
	EndIf
	if playerref && sexActors[0] && sexActors[0] == playerref
		AddHadSexFaction(sexActors, Rape)
	endif
EndFunction

Actor[] Function MakeActorArray(Actor Actor1, Actor Actor2, Actor Actor3, Actor Actor4, Actor Actor5)
	Actor[] sexActors
	if !Actor1 && !Actor2 && !Actor3 && !Actor4 && !Actor5
		return None
	endif
	If Actor5
		sexActors = New Actor[5]
		sexActors[0] = Actor1
		sexActors[1] = Actor2
		sexActors[2] = Actor3
		sexActors[3] = Actor4
		sexActors[4] = Actor5
	Elseif Actor4
		sexActors = New Actor[4]
		sexActors[0] = Actor1
		sexActors[1] = Actor2
		sexActors[2] = Actor3
		sexActors[3] = Actor4
	Elseif Actor3
		sexActors = New Actor[3]
		sexActors[0] = Actor1
		sexActors[1] = Actor2
		sexActors[2] = Actor3
	Else
		sexActors = New Actor[2]
		sexActors[0] = Actor1
		sexActors[1] = Actor2
	Endif
	Return sexActors
EndFunction

int Function GetAliasArray(ReferenceAlias ActorRef01, ReferenceAlias ActorRef02, ReferenceAlias ActorRef03, ReferenceAlias ActorRef04, ReferenceAlias ActorRef05)
	BaboTempList.revert()

	Actor[] ActorArray = New Actor[5]
	if ActorRef01
		ActorArray[0] = ActorRef01.GetReference() as actor
	endif

	if ActorRef02
		ActorArray[1] = ActorRef02.GetReference() as actor
	endif

	if ActorRef03
		ActorArray[2] = ActorRef03.GetReference() as actor
	endif

	if ActorRef04
		ActorArray[3] = ActorRef04.GetReference() as actor
	endif

	if ActorRef05
		ActorArray[4] = ActorRef05.GetReference() as actor
	endif	

	
	int i = 5
	While i > 0
		i -= 1
		if ActorArray[i] && !ActorArray[i].isdead()
			BaboTempList.addform(ActorArray[i])
		endif
	EndWhile
	int tl = BaboTempList.getsize()
	return tl
EndFunction

Function EquipRestraints(actor akactor, bool gag)
	akactor.Additem(BaboWristRope01, 1, true)
	akactor.Additem(BaboAnkleRope01, 1, true)
	akactor.Additem(BaboCollarLeatherBinds, 1, true)
	akactor.EquipItem(BaboWristRope01, true, true)
	akactor.EquipItem(BaboAnkleRope01, true, true)
	akactor.EquipItem(BaboCollarLeatherBinds, true, true)
	if gag
		akactor.Additem(BaboGagLogBit01, 1, true)
		akactor.EquipItem(BaboGagLogBit01, true, true)
	endif
EndFunction

Function EquipGag(actor akactor, bool gag)
	if gag
		akactor.Additem(BaboGagLogBit01, 1, true)
		akactor.EquipItem(BaboGagLogBit01, true, true)
	else
		akactor.UnequipItem(BaboGagLogBit01, true, true)
	endif
EndFunction

Function EquipRestraintsYoke(actor akactor, bool gag)
	akactor.Additem(BaboYokeWood01, 1, true)
	akactor.Additem(BaboAnkleIronBlack, 1, true)
	akactor.EquipItem(BaboYokeWood01, true, true)
	akactor.EquipItem(BaboAnkleIronBlack, true, true)
	if gag
		akactor.Additem(BaboGagLogBit01, 1, true)
		akactor.EquipItem(BaboGagLogBit01, true, true)
	endif
EndFunction

Function UnEquipRestraints(actor akactor)
	akactor.UnequipItem(BaboYokeWood01, true, true)
	akactor.UnequipItem(BaboWristRope01, true, true)
	akactor.UnequipItem(BaboAnkleRope01, true, true)
	akactor.UnequipItem(BaboGagLogBit01, true, true)
	akactor.UnequipItem(BaboCollarLeatherBinds, true, true)
	akactor.UnequipItem(BaboAnkleIronBlack, true, true)
EndFunction


Function EquipCumItem(actor akactor)
	akactor.addItem(BaboCumLowerBod1Playable, 1, false)
	akactor.addItem(BaboCumMesh1Playable, 1, false)
	akactor.addItem(BaboCumUpperBodyPlayable, 1, false)
	akactor.addItem(BaboCumUpperBodyPlayable, 1, false)
	akactor.addItem(BaboTearsMesh1Playable, 1, false)
	akactor.EquipItem(BaboCumLowerBod1Playable, true, true)
	akactor.EquipItem(BaboCumMesh1Playable, true, true)
	akactor.EquipItem(BaboCumUpperBodyPlayable, true, true)
	akactor.EquipItem(BaboCumUpperBodyPlayable, true, true)
	akactor.EquipItem(BaboTearsMesh1Playable, true, true)
EndFunction

Function UnEquipCumItem(actor akactor)
	akactor.UnEquipItem(BaboCumLowerBod1Playable, true, true)
	akactor.UnEquipItem(BaboCumMesh1Playable, true, true)
	akactor.UnEquipItem(BaboCumUpperBodyPlayable, true, true)
	akactor.UnEquipItem(BaboCumUpperBodyPlayable, true, true)
	akactor.UnEquipItem(BaboTearsMesh1Playable, true, true)
	akactor.RemoveItem(BaboCumLowerBod1Playable, 1, false)
	akactor.RemoveItem(BaboCumMesh1Playable, 1, false)
	akactor.RemoveItem(BaboCumUpperBodyPlayable, 1, false)
	akactor.RemoveItem(BaboCumUpperBodyPlayable, 1, false)
	akactor.RemoveItem(BaboTearsMesh1Playable, 1, false)
EndFunction

Function TrapSetCoordinates(Actor akactor, Objectreference akTrap)
;TrapType 0 Basic 1 BearTrap 2 WormVore 3 SnareRope
	ClearActorState(akactor)
	Restrained(akactor, true)
	BaboPosPCRef.moveto(akTrap)
	akactor.SetAngle(BaboPosPCRef.GetAngleX(), BaboPosPCRef.GetAngleY(), BaboPosPCRef.GetAngleZ())
	akactor.SplineTranslateToRef(BaboPosPCRef, 1.3, 150.0)
	akactor.SetVehicle(BaboPosPCRef)
EndFunction

Function TrapResetCoordinates(Actor akactor, Bool bStaggerMotion = false)
	if akactor == PlayerRef
		Game.SetPlayerAIDriven(false)
		akactor.SetHeadTracking(true)
		akactor.SetVehicle(None)
		if bStaggerMotion
			akActor.playidle(StaggerStart)
		endif
	else
		akActor.SetRestrained(False)
		akActor.SetDontMove(False)
		ActorUtil.RemovePackageOverride(akActor, BaboDoNothing)
		if bStaggerMotion
			akActor.playidle(StaggerStart)
		endif
	endif
EndFunction

Function ClearActorState(Actor akActor)
  akActor.StopCombat()
  akActor.SheatheWeapon();test need
	If (akActor.IsSneaking())
		akActor.StartSneaking()
	EndIf
  akActor.ClearKeepOffsetFromActor()
EndFunction

Function Restrained(Actor akActor, bool abRestrain)
if abRestrain
	If(akActor == PlayerRef)
		Game.SetPlayerAIDriven(true)
		akactor.SetHeadTracking(false)
	Else
		ActorUtil.AddPackageOverride(akActor, BaboDoNothing, 100, 1)
		akActor.EvaluatePackage()
		akActor.SetRestrained(true)
		akActor.SetDontMove(true)
	EndIf
else
	if akactor == PlayerRef
		Game.SetPlayerAIDriven(false)
		akactor.SetHeadTracking(true)
		akactor.SetVehicle(None)
		;akActor.playidle(StaggerStart)
	else
		akActor.SetRestrained(False)
		akActor.SetDontMove(False)
		ActorUtil.RemovePackageOverride(akActor, BaboDoNothing)
		;akActor.playidle(StaggerStart)
	endif
endif
EndFunction

Function LosingControl()
	PrecisionCheck(PlayerRef, true)
	Game.DisablePlayerControls(true, true, true, false, true, true, false, false)
	Game.SetPlayerAIDriven(true)
	;ActorUtil.AddPackageOverride(PlayerRef, BaboDoNothing, 100, 1)
	;PlayerRef.SetDontMove(True)
	;PlayerRef.SetRestrained(True)
	Game.ForceThirdPerson()
	ControlBool = false
EndFunction

Function StuckControl()
	PrecisionCheck(PlayerRef, true)
	Game.SetPlayerAIDriven(true)
	Game.ForceThirdPerson()
	;PlayerRef.SetRestrained(True)
	ActorUtil.AddPackageOverride(PlayerRef, BaboDoNothing, 100, 1)
;	PlayerRef.SetDontMove(True)
	ControlBool = false
EndFunction

Bool Function RecoverControl(Bool ResetIdle = true)
if ControlBool == false
	PrecisionCheck(PlayerRef, false)
	Game.EnablePlayerControls()
	Game.SetPlayerAIDriven(false)
	PlayerRef.SetRestrained(false)
	PlayerRef.SetDontMove(false)
	ActorUtil.RemovePackageOverride(PlayerRef, BaboDoNothing)
	Game.ForceThirdPerson()
	if ResetIdle
		Debug.SendAnimationEvent(PlayerRef, "IdleForceDefaultState")
	endif
	ControlBool = true
	return true
else
	return false
endif
EndFunction

Function CompatiblityCheck(Bool Botton)
If Botton == true
	BDMCM.DisableSLHH(True)
Else
	BDMCM.DisableSLHH(False)
EndIf
EndFunction

Function NPCTurntoBandit(ReferenceAlias Alias01)
	Actor ActorRef01 = Alias01.GetActorReference()
	actorRef01.addtoFaction(BanditFaction)
	actorRef01.startCombat(PlayerRef)
EndFunction

Function NPCChallengeStart(ReferenceAlias Alias01, ReferenceAlias Alias02)
	Actor ActorRef01 = Alias01.GetActorReference()
	Actor ActorRef02 = Alias02.GetActorReference()
	ActorRef01.RemoveSpell(BaboCalmSpell)
	actorRef01.addtoFaction(BaboHateNPC01Faction)
	if actorRef01.GetActorValue("Confidence") < 4
		actorRef01.SetActorValue("Confidence", 4) 
	EndIf
	actorRef01.startCombat(actorRef02)
	if !actorRef02.isinfaction(BaboHateNPC02Faction)
		ActorRef02.RemoveSpell(BaboCalmSpell)
		actorRef02.addtoFaction(BaboHateNPC02Faction)
		if actorRef02.GetActorValue("Confidence") < 4
			actorRef02.SetActorValue("Confidence", 4) 
		EndIf
		actorRef02.startCombat(actorRef01)
	endif
EndFunction

Function NPCpacifyAlias(ReferenceAlias Alias01, ReferenceAlias Alias02)
	Actor ActorRef01 = Alias01.GetActorReference()
	ActorRef01.RemoveFromFaction(BaboHateNPC01Faction)
	ActorRef01.AddSpell(BaboCalmSpell)
	ActorRef01.SetActorValue("Confidence", 2) 
	ActorRef01.StopCombat()
	
	if Alias02.GetReference()
		if !(Alias02.GetReference() as actor).isdead()
			Actor ActorRef02 = Alias02.GetReference() as actor
			ActorRef02.RemoveFromFaction(BaboHateNPC02Faction)
			ActorRef02.AddSpell(BaboCalmSpell)
			ActorRef02.SetActorValue("Confidence", 2)
			ActorRef02.StopCombat()
		endif
	endif
EndFunction

Function ActorChallengeStart(actor ActorRef)
	ActorRef.RemoveSpell(BaboCalmSpell)
	actorRef.addtoFaction(BaboHateFaction)
	PlayerRef.addtoFaction(BaboPlayerFaction)
	if actorRef.GetActorValue("Confidence") < 4
		actorRef.SetActorValue("Confidence", 4) 
	EndIf
	actorRef.startCombat(PlayerRef)
EndFunction

Function ChallengeStart(ReferenceAlias AliasToAnger)
	Actor ActorRef = AliasToAnger.GetActorReference()
	ActorRef.RemoveSpell(BaboCalmSpell)
	actorRef.addtoFaction(BaboHateFaction)
	PlayerRef.addtoFaction(BaboPlayerFaction)
	if actorRef.GetActorValue("Confidence") < 4
		actorRef.SetActorValue("Confidence", 4) 
	EndIf
	actorRef.startCombat(PlayerRef)
EndFunction

Function pacifyAlias(ReferenceAlias AliasToPacify)
	Actor ActorRef = AliasToPacify.GetActorReference()
	actorRef.RemoveFromFaction(BaboHateFaction)
	PlayerRef.RemoveFromFaction(BaboPlayerFaction)
	ActorRef.AddSpell(BaboCalmSpell)
	actorRef.SetActorValue("Confidence", 2) 
	actorRef.StopCombat()
EndFunction

Message property BaboSurrendermsg Auto
Message property BaboSurrenderFailmsg Auto

Function ReadySurrender(bool switch)
	(BaboMonitorScript as BaboDiaMonitorScript).bSurrenderKey = switch
EndFunction

Function Surrender(actor akactor)
	if akactor.isinfaction(BaboHateFaction)
		int ichoice = BaboSurrendermsg.show()
		if ichoice == 0
			CheckDuelQuests("On_BaboDiaSurrender")
		endif
	else
		BaboSurrenderFailmsg.show()
	endif
	;/ if BaboEncounter02.isrunning() && BaboEncounter02.getstage() == 50 /;
	;/ elseif BaboEncounter13.isrunning() && BaboEncounter13.getstage() == 120	 /;
	;/ endif /;
EndFunction

bool function CheckDuelQuests(string eventstring)
	Int handle = ModEvent.Create(eventstring)
	ModEvent.Send(handle)
EndFunction

ObjectReference Property BaboTempStolengoodsRef Auto
ObjectReference Property BaboConfiscatedChestSolitudeRef Auto

Function RetrieveConfiscatedBelongings()
	BaboTempStolengoodsRef.removeallitems(PlayerRef, false, true)
	BaboConfiscatedChestSolitudeRef.removeallitems(PlayerRef, false, true)
EndFunction

Function DisableEssential()
	BDMCM.Disableinvincibility()
EndFunction

Function EnableEssential()
	BDMCM.EnableInvincibility()
EndFunction

Function AwayFromtheScene()
	ControlBool = false
	RecoverControl(false)
	Game.ForceFirstPerson()
	Game.DisablePlayerControls(true, true, true, false, true, false, true, false)
	;Game.DisablePlayerControls(true,true,true,false,true,true,true,false)
	Game.SetInChargen(false, true, false)
EndFunction

Function FadeinScene(bool SlowScene)
if SlowScene
	BaboFadeToBlack.ApplyCrossFade(4.0)
	Utility.Wait(4.0)
	BaboFadeToBlackHoldImod.Apply()
	BaboFadeToBlack.ApplyCrossFade(0.01)
	ImageSpaceModifier.RemoveCrossFade(0.01)
else
	BaboFadeToBlackFast.ApplyCrossFade(2.0)
	Utility.Wait(2.0)
	BaboFadeToBlackHoldImod.Apply()
	BaboFadeToBlackFast.ApplyCrossFade(0.01)
	ImageSpaceModifier.RemoveCrossFade(0.01)
endif
EndFunction

Function FadeOutScene(bool SlowScene)
if SlowScene
	BaboFadeToBlackBackImod.ApplyCrossFade(0.5)
	BaboFadeToBlackBackImod.Apply()
	BaboFadeToBlackHoldImod.ApplyCrossFade(2.0)
	Utility.Wait(3.0)
	BaboFadeToBlackHoldImod.remove()
	ImageSpaceModifier.RemoveCrossFade(0.01)
else
	BaboFadeToBlackBackImodFast.ApplyCrossFade(0.5)
	BaboFadeToBlackBackImodFast.Apply()
	BaboFadeToBlackHoldImod.ApplyCrossFade(1.0)
	Utility.Wait(1.0)
	BaboFadeToBlackHoldImod.Remove()
	ImageSpaceModifier.RemoveCrossFade(0.01)
endif
EndFunction

Function FadeinMove(ReferenceAlias akactorRef, ReferenceAlias MovePoint, Int Callstage, int Stage)
Actor akactor = akactorRef.GetReference() as actor
ObjectReference MP = MovePoint.getref() as objectreference

	FadeToBlackImod.ApplyCrossFade(1.0)
	Utility.Wait(2.0)
	FadeToBlackHoldImod.Apply()
	FadeToBlackImod.ApplyCrossFade(0.01)
	ImageSpaceModifier.RemoveCrossFade(0.01)

	akactor.moveto(MP);move actor to xmarker
	Utility.wait(5.0)
	
	If stage == 1;WhiterunViceCaptain
		BaboDialogueWhiterun.setstage(Callstage)
	elseif stage == 2;MarkarthGuard
		BaboEventMarkarthGuard.setstage(Callstage)
	elseif stage == 3;CL Event 01
		BaboChangeLocationEvent01.setstage(Callstage)
	EndIF
	
	FadeToBlackBackImod.ApplyCrossFade(0.01)
	FadeToBlackBackImod.Apply()
	FadeToBlackHoldImod.ApplyCrossFade(1.0)
	Utility.Wait(2.0)
	FadeToBlackHoldImod.Remove()
	ImageSpaceModifier.RemoveCrossFade(0.01)
EndFunction

Function SLHHFilterClearActor(Form pTarget)
	Int handle = ModEvent.Create("ON_SLHH_RemoveFromFilterEvent")
	ModEvent.PushForm(handle, pTarget)
	ModEvent.Send(handle)
EndFunction
Function SLHHFilterActor(Form pTarget)
	Int handle = ModEvent.Create("ON_SLHH_AddtoFilterEvent")
	ModEvent.PushForm(handle, pTarget)
	ModEvent.Send(handle)
EndFunction

Function SLHHActivate(Actor pTarget, Actor pTargetFriend = None)
	If BaboHorribleHarassment.getvalue() == 1
		Keyword SLHHScriptEventKeyword = Game.GetFormFromFile(0x0000C510, "SexLabHorribleHarassment.esp") as Keyword
		SLHHScriptEventKeyword.SendStoryEvent(None, pTarget, pTargetFriend)
	EndIf
endFunction

Function SLHHChokeActivate(Actor pTarget)
	BDMScript.SLHHBCActivate(pTarget, None, 1)
endFunction

Function SLHHChokeSexActivate(Actor pTarget)
	BDMScript.SLHHBCActivate(pTarget, None, 0)
endFunction

Function FHUInflationEvent(form inflater, form injector, Bool Inflation, int poolmask, float amount, float fhutime, string callback)
	if BaboFHU.getvalue() == 1
		if injector
			BDMScript.SendFHUInflationEvent(inflater, injector, Inflation, poolmask, amount, fhutime as int, callback)
		else
			BDMScript.SendFHUInflationEventNoActor(inflater, Inflation, poolmask, amount, fhutime as int, callback)
		endif
	endif
Endfunction

Float Property DebtValue Auto Hidden
Float Property DebtInterestRateDay Auto Hidden
int Property DebtLength Auto Hidden

Function CustomLoanSharkLoanReady(Float fValue, Float InterestRateDay, int iLength)
	DebtValue = fValue
	DebtInterestRateDay = InterestRateDay
	DebtLength = iLength
EndFunction

Function CustomLoanSharkLoan()
if DebtValue != 0
	(BaboLoanSharks as BaboLoanSharkScript).LSCustomLoan(DebtValue, DebtInterestRateDay, DebtLength)
endif
EndFunction

Function StealArmorStart(Bool bregister, form akRef)
	if bregister
		(BaboStealingScript as BaboStealingArmorScript).RegisterPO3HitEvent(akRef)
	else
		(BaboStealingScript as BaboStealingArmorScript).UnRegisterPO3HitEvent(akRef)
	endif
EndFunction

Function SpectatorWOEnemyActivate(Actor pTarget, Actor pTargetFriend = None)
	If BaboGlobalSpectatorSwitch.getvalue() == 1
		BaboSpectatorWOEnemyKeyword.SendStoryEvent(None, pTarget, pTargetFriend)
	EndIf
endFunction

Function SpectatorActivate(Actor pTarget, Actor pTargetFriend = None)
	If BaboGlobalSpectatorSwitch.getvalue() == 1
		BaboSpectatorKeyword.SendStoryEvent(None, pTarget, pTargetFriend)
	EndIf
endFunction

Bool Function KidnapQuestStart(Actor pTarget, Actor pTargetFriend = None, int LocationNum = 0, Location KidnapLocation)
	if LocationNum == 4
		KidnapLocation = BaboKidnapperLocation01
	elseif LocationNum == 5
		KidnapLocation = BaboKidnapperLocation02
	elseif LocationNum == 6
		KidnapLocation = BaboKidnapperLocation03
	elseif LocationNum == 7
		KidnapLocation = BaboKidnapperLocation04
	elseif LocationNum == 10
		KidnapLocation = BaboKidnapperLocationCave;Bandits
	elseif LocationNum == 11
		KidnapLocation = BaboKidnapperLocationCave02
	elseif LocationNum == 12
		KidnapLocation = BaboKidnapperLocationCave03
	elseif LocationNum == 13
		KidnapLocation = BaboKidnapperLocationTower01
	elseif LocationNum == 20
		KidnapLocation = BaboSlaverLocation01
	elseif LocationNum == 21
		KidnapLocation = BaboSlaverLocation02
	elseif LocationNum == 22
		KidnapLocation = BaboSlaverLocation03
	elseif LocationNum == 23
		KidnapLocation = BaboSlaverLocation04
	elseif LocationNum == 24
		KidnapLocation = BaboSlaverLocation01
		;KidnapLocation = BaboSlaverLocation05; WIP
	elseif LocationNum == 25
		KidnapLocation = BaboSlaverNobleHouseLocation01
	else
		if KidnapLocation == None
			Return false
		endif
	endif
	BaboKidnapKeyword.SendStoryEvent(KidnapLocation, pTarget, pTargetFriend)
	Utility.wait(5.0);For the quest to start
	return true
endFunction

Function SpectatorChangeStatus(int stage)
	If BaboGlobalSpectatorSwitch.getvalue() == 1
		BaboSpectatorScript.Setstage(stage)
	EndIf
endFunction

Function StopAlltheEncounters()
	BaboChangeLocationEvent01.stop()
	BaboChangeLocationEvent02.stop()
	BaboChangeLocationEvent02DLC02.stop()
	BaboChangeLocationEvent05.stop()
	BaboChangeLocationEvent06.stop()
	BaboChangeLocationEvent07.stop()
	
	BaboEncounter01.stop()
	BaboEncounter02.stop()
	BaboEncounter03.stop()
	BaboEncounter04.stop()
	BaboEncounter05.stop()
	BaboEncounter06.stop()
	BaboEncounter07.stop()
	BaboEncounter08.stop()
	BaboEncounter09.stop()
	BaboEncounter10.stop()
	BaboEncounter11.stop()
	BaboEncounter12.stop()
	BaboEncounter13.stop()
EndFunction

Function MiscMessagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboeventmisc01")
		Debug.notification(msg)
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboeventmisc02")
		Debug.notification(msg)
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboeventmisc03")
		Debug.notification(msg)
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baboeventmisc04")
		Debug.notification(msg)
	else
		msg = JsonUtil.getstringvalue(file, "babonoenemy")
		Debug.notification(msg)
	endif

EndFunction

Function HirelingMessagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboeventhireling01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboeventhireling02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboeventhireling03")
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baboeventhireling04")
	endif
	Debug.messagebox(msg)
EndFunction

Function MarkarthGuardMessagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboeventmarkarthguard01")
		Debug.notification(msg)
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboeventmarkarthguard02")
		Debug.notification(msg)
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboeventmarkarthguard03")
		Debug.notification(msg)
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baboeventmarkarthguard04")
		Debug.notification(msg)
	endif
	
EndFunction

Function StealArmorMessagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "stealingarmorscriptarmorstolen")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "stealingarmorscriptpantiesstolen")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "stealingarmorscriptclothesstolen")
	endif
	Debug.notification(msg)
EndFunction

Function WindhelmNewgnisisMessagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboeventnewgnisismasterscript01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboeventnewgnisismasterscript02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboeventnewgnisismasterscript03")
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baboeventnewgnisismasterscript04")
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "baboeventnewgnisismasterscript05")
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "baboeventnewgnisismasterscript06")
	elseif num == 7
		msg = JsonUtil.getstringvalue(file, "baboeventnewgnisismasterscript07")
	elseif num == 8
		msg = JsonUtil.getstringvalue(file, "baboeventnewgnisismasterscript08")
	elseif num == 9
		msg = JsonUtil.getstringvalue(file, "baboeventnewgnisismasterscript09")
	elseif num == 10
		msg = JsonUtil.getstringvalue(file, "baboeventnewgnisismasterscript10")
	endif
	Debug.messagebox(msg)
EndFunction

Function WhiterunOrcVisitMessagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors03")
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors04")
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors05")
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors06")
	elseif num == 7
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors07")
	elseif num == 8
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors08")
	elseif num == 9
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors09")
	elseif num == 10
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors10")
	elseif num == 11
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors11")
	elseif num == 12
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors12")
	elseif num == 13
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors13")
	elseif num == 14
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors14")
	elseif num == 15
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors15")
	elseif num == 16
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunorcvisitiors16")
	endif
	Debug.messagebox(msg)
EndFunction

Function WhiterunViceCaptainMessagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunvicecapatain01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunvicecapatain02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunvicecapatain03")
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunvicecapatain04")
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunvicecapatain05")
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunvicecapatain06")
	elseif num == 7
		msg = JsonUtil.getstringvalue(file, "baboeventwhiterunvicecapatain07")
	endif
	Debug.messagebox(msg)
EndFunction

Function BaboDiaMessagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "babodiaquest01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "babodiaquest02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "babodiaquest03")
	endif
	Debug.messagebox(msg)
EndFunction

Function MonitorMessagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "babodiamonitor01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "babodiamonitor02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "babodiamonitor03")
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "babodiamonitor04")
	endif
	Debug.Notification(msg)
EndFunction

Function BadLoanSharkbox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboloanshark01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboloanshark02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboloanshark03")
	endif
	Debug.messagebox(msg)
EndFunction

Function BadRieklingDuelMessagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_03")
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_04")
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_05")
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_06")
	elseif num == 7
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_07")
	elseif num == 8
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_08")
	elseif num == 9
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_09")
	elseif num == 10
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_10")
	elseif num == 11
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_11")
	elseif num == 12
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_12")
	elseif num == 13
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_13")
	elseif num == 14
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_14")
	elseif num == 15
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_15")
	elseif num == 16
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_16")
	elseif num == 17
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_17")
	elseif num == 18
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_18")
	elseif num == 19
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_19")
	elseif num == 20
		msg = JsonUtil.getstringvalue(file, "baborieklingDuel01_20")
	endif
	Debug.messagebox(msg)
EndFunction

Function BadEndMessagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "babobadend01")
		Debug.notification(msg)
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "babobadend02")
		Debug.notification(msg)
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "babobadend03")
		Debug.notification(msg)
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "babobadend04")
		Debug.notification(msg)
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "babobadend05")
		Debug.notification(msg)
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "babobadend06")
		Debug.notification(msg)
	elseif num == 7
		msg = JsonUtil.getstringvalue(file, "babobadend07")
		Debug.notification(msg)
	elseif num == 8
		msg = JsonUtil.getstringvalue(file, "babobadend08")
		Debug.notification(msg)
	elseif num == 9
		msg = JsonUtil.getstringvalue(file, "babobadend09")
		Debug.messagebox(msg)
	elseif num == 10
		msg = JsonUtil.getstringvalue(file, "babobadend10")
		Debug.messagebox(msg)
	endif
EndFunction

Function EncounterEvent01Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboencounterevent01_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboencounterevent01_02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboencounterevent01_03")
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baboencounterevent01_04")
	endif
	Debug.messagebox(msg)
EndFunction

Function EncounterEvent02Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboencounterevent02_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboencounterevent02_02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboencounterevent02_03")
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baboencounterevent02_04")
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "baboencounterevent02_05")
	endif
	Debug.messagebox(msg)
EndFunction

Function EncounterEvent03Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboencounterevent03_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboencounterevent03_02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboencounterevent03_03")
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baboencounterevent03_04")
	endif
Debug.messagebox(msg)
EndFunction

Function EncounterEvent04Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboencounterevent04_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboencounterevent04_02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboencounterevent04_03")
	endif
Debug.messagebox(msg)
EndFunction

Function EncounterEvent05Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboencounterevent05_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboencounterevent05_02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboencounterevent05_03")
	endif
Debug.messagebox(msg)
EndFunction

Function EncounterEvent06Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboencounterevent06_01")
		Debug.notification(msg)
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboencounterevent06_02")
		Debug.messagebox(msg)
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboencounterevent06_03")
		Debug.messagebox(msg)
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboencounterevent06_04")
		Debug.notification(msg)
	endif
EndFunction

Function EncounterEvent07Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboencounterevent07_01")
		Debug.messagebox(msg)
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboencounterevent07_02")
		Debug.messagebox(msg)
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboencounterevent07_03")
		Debug.messagebox(msg)
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baboencounterevent07_04")
		Debug.messagebox(msg)
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "baboencounterevent07_05")
		Debug.messagebox(msg)
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "baboencounterevent07_06")
		Debug.messagebox(msg)
	elseif num == 7
		msg = JsonUtil.getstringvalue(file, "baboencounterevent07_07")
		Debug.messagebox(msg)
	elseif num == 8
		msg = JsonUtil.getstringvalue(file, "baboencounterevent07_08")
		Debug.messagebox(msg)
	endif
EndFunction

Function EncounterEvent08Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboencounterevent08_01")
		Debug.messagebox(msg)
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboencounterevent08_02")
		Debug.notification(msg)
	endif
EndFunction

Function EncounterEvent09Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboencounterevent09_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboencounterevent09_02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboencounterevent09_03")
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baboencounterevent09_04")
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "baboencounterevent09_05")
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "baboencounterevent09_06")
	endif
	
	Debug.messagebox(msg)
EndFunction

Function EncounterEvent10Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboencounterevent10_01")
		Debug.messagebox(msg)
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboencounterevent10_02")
		Debug.notification(msg)
	endif
EndFunction

Function EncounterEvent11Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboencounterevent11_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboencounterevent11_02")
	endif
Debug.messagebox(msg)
EndFunction

Function EncounterEvent12Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboencounterevent12_01")
		Debug.messagebox(msg)
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboencounterevent12_02")
		Debug.messagebox(msg)
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboencounterevent12_03")
		Debug.notification(msg)
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baboencounterevent12_04")
		Debug.messagebox(msg)
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "baboencounterevent12_05")
		Debug.messagebox(msg)
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "baboencounterevent12_06")
		Debug.messagebox(msg)
	endif
EndFunction

Function EncounterEvent13Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboencounterevent13_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboencounterevent13_02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboencounterevent13_03")
	endif
Debug.messagebox(msg)
EndFunction

Function ChangeLocationEvent01Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent01_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent01_02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent01_03")
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent01_04")
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent01_05")
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent01_06")
	elseif num == 7
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent01_07")
	elseif num == 8
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent01_08")
	elseif num == 9
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent01_09")
	endif
	Debug.messagebox(msg)
EndFunction

Function ChangeLocationEvent02Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent02_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent02_02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent02_03")
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent02_04")
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent02_05")
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent02_06")
	elseif num == 7
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent02_07")
	elseif num == 8
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent02_08")
	elseif num == 9
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent02_09")
	elseif num == 10
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent02_10")
	elseif num == 11
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent02_11")
	elseif num == 12
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent02_12")
	endif
	Debug.messagebox(msg)
EndFunction

Function NightgateInnMessagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent03_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent03_02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent03_03")
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent03_04")
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent03_05")
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent03_06")
	elseif num == 7
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent03_07")
	endif
		Debug.messagebox(msg)
EndFunction

Function ChangeLocationEvent04Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent04_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent04_02")
	else
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent04_00")
	endif
	Debug.messagebox(msg)
EndFunction

Function ChangeLocationEvent05Messagebox(int num)

String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent05_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "BaboChangeLocationEvent05_02")
	endif
	Debug.messagebox(msg)
EndFunction


Function ChangeLocationEvent06Messagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent06_01")
		Debug.notification(msg)
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent06_02")
		Debug.messagebox(msg)
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent06_03")
		Debug.notification(msg)
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent06_04")
		Debug.messagebox(msg)
	endif
EndFunction

Function ChangeLocationEvent07Messagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent07_01")
		Debug.notification(msg)
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent07_02")
		Debug.messagebox(msg)
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent07_03")
		Debug.messagebox(msg)
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent07_04")
		Debug.messagebox(msg)
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent07_05")
		Debug.messagebox(msg)
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent07_06")
		Debug.messagebox(msg)
	elseif num == 7
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent07_07")
		Debug.messagebox(msg)
	endif
EndFunction

Function ChangeLocationEvent08Messagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent08_01")
		Debug.messagebox(msg)
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent08_02")
		Debug.messagebox(msg)
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent08_03")
		Debug.messagebox(msg)
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent08_04")
		Debug.messagebox(msg)
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent08_05")
		Debug.messagebox(msg)
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent08_06")
		Debug.messagebox(msg)
	elseif num == 7
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent08_07")
		Debug.messagebox(msg)
	elseif num == 8
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent08_08")
		Debug.messagebox(msg)
	elseif num == 9
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent08_09")
		Debug.messagebox(msg)
	elseif num == 10
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent08_10")
		Debug.messagebox(msg)
	elseif num == 11
		msg = JsonUtil.getstringvalue(file, "babochangelocationevent08_11")
		Debug.messagebox(msg)
	endif
EndFunction

Function AnimalCareEventMessagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboanimalcareevent01_01")
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboanimalcareevent01_02")
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboanimalcareevent01_03")
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baboanimalcareevent01_04")
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "baboanimalcareevent01_05")
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "baboanimalcareevent01_06")
	elseif num == 7
		msg = JsonUtil.getstringvalue(file, "baboanimalcareevent01_07")
	elseif num == 8
		msg = JsonUtil.getstringvalue(file, "baboanimalcareevent01_08")
	elseif num == 9
		msg = JsonUtil.getstringvalue(file, "baboanimalcareevent01_09")
	endif
	
	Debug.messagebox(msg)
EndFunction

Function AnimalCareMarkarthEventMessagebox(int num)
String msg
	msg = JsonUtil.getstringvalue(file, "baboanimalcaremarkarthevent_" + num)
	Debug.messagebox(msg)
EndFunction

Function KidnapEvent01Messagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_01")
		Debug.messagebox(msg)
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_02")
		Debug.messagebox(msg)
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_03")
		Debug.notification(msg)
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_04")
		Debug.messagebox(msg)
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_05")
		Debug.messagebox(msg)
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_06")
		Debug.messagebox(msg)
	elseif num == 7
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_07")
		Debug.messagebox(msg)
	elseif num == 8
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_08")
		Debug.messagebox(msg)
	elseif num == 9
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_09")
		Debug.messagebox(msg)
	elseif num == 10
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_10")
		Debug.messagebox(msg)
	elseif num == 11
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_11")
		Debug.messagebox(msg)
	elseif num == 12
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_12")
		Debug.messagebox(msg)
	elseif num == 13
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_13")
		Debug.messagebox(msg)
	elseif num == 14
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_14")
		Debug.messagebox(msg)
	elseif num == 15
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_15")
		Debug.messagebox(msg)
	elseif num == 16
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_16")
		Debug.notification(msg)
	elseif num == 17
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_17")
		Debug.messagebox(msg)
	elseif num == 18
		msg = JsonUtil.getstringvalue(file, "babokidnapevent01_18")
		Debug.messagebox(msg)
	endif
EndFunction

Function SlaveryEventMessagebox(int num);Kidnap Event 20~29
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_01")
		Debug.messagebox(msg)
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_02")
		Debug.messagebox(msg)
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_03")
		Debug.notification(msg)
	elseif num == 4
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_04")
		Debug.notification(msg)
	elseif num == 5
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_05")
		Debug.notification(msg)
	elseif num == 6
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_06")
		Debug.messagebox(msg)
	elseif num == 7
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_07")
		Debug.messagebox(msg)
	elseif num == 8
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_08")
		Debug.notification(msg)
	elseif num == 9
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_09")
		Debug.messagebox(msg)
	elseif num == 10
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_10")
		Debug.messagebox(msg)
	elseif num == 11
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_11")
		Debug.notification(msg)
	elseif num == 12
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_12")
		Debug.messagebox(msg)
	elseif num == 13
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_13")
		Debug.messagebox(msg)
	elseif num == 14
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_14")
		Debug.notification(msg)
	elseif num == 15
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_15")
		Debug.notification(msg)
	elseif num == 16
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_16")
		Debug.notification(msg)
	elseif num == 17
		msg = JsonUtil.getstringvalue(file, "baboslaveryevent01_17")
		Debug.messagebox(msg)
	endif
EndFunction


Function HiddenPocketMessagebox(int num)
String msg
	if num == 1
		msg = JsonUtil.getstringvalue(file, "babohiddenpocket_01")
		Debug.notification(msg)
	elseif num == 2
		msg = JsonUtil.getstringvalue(file, "babohiddenpocket_02")
		Debug.notification(msg)
	elseif num == 3
		msg = JsonUtil.getstringvalue(file, "babohiddenpocket_03")
		Debug.notification(msg)
	endif
EndFunction

Function Test()
	JsonUtil.SetStringValue(File, "BaboChangeLocationEvent0301", "TestTest")
EndFunction

Bool IsFemale

int Function IdentifySex(actor ActorRef)
int Sex
	Sex = ActorRef.getactorbase().getsex()
	Return Sex
EndFunction

Bool Function RemoveHeelEffect(actor ActorRef)
IsFemale = IdentifySex(ActorRef) as bool
	if IsFemale && ActorRef.GetWornForm(0x00000080)
		; Remove NiOverride High Heels
		if NiOverride.HasNodeTransformPosition(ActorRef, false, true, "NPC", "internal")
			float[] pos = NiOverride.GetNodeTransformPosition(ActorRef, false, IsFemale, "NPC", "internal")
			pos[0] = -pos[0]
			pos[1] = -pos[1]
			pos[2] = -pos[2]
			NiOverride.AddNodeTransformPosition(ActorRef, false, IsFemale, "NPC", "BaboInteractiveDia.esp", pos)
			NiOverride.UpdateNodeTransform(ActorRef, false, IsFemale, "NPC")
			return true
		endIf
	endIf
	return false
EndFunction

Function ResetHeelEffect(actor ActorRef)
	if NiOverride.RemoveNodeTransformPosition(ActorRef, false, IsFemale, "NPC", "BaboInteractiveDia.esp")
		NiOverride.UpdateNodeTransform(ActorRef, false, IsFemale, "NPC")
	endIf
EndFunction

Function PairedMotionCreature(actor akactor1, actor akactor2, int num, string creaturerace, bool animate, Bool OverridePackage)

string idleAkactor1
string idleAkactor2
if animate
	PrecisionCheck(akactor1, true)
	PrecisionCheck(akactor2, true)
	int angle
	int Xaxis
	int Yaxis
	akactor1.addtofaction(BaboNPCAnimating)
	akactor2.addtofaction(BaboNPCAnimating)
	if OverridePackage
		ActorUtil.AddPackageOverride(akactor1, BaboDoNothing, 100, 1)
		ActorUtil.AddPackageOverride(akactor2, BaboDoNothing, 100, 1)
		akactor1.EvaluatePackage()
		akactor2.EvaluatePackage()
	endif	

	if akactor1 == PlayerRef
		Game.SetPlayerAIDriven()
		if Game.GetCameraState() == 0
			Game.ForceThirdPerson()
		endIf
	else
		;akactor1.SetDontMove(True)
		;akactor1.SetRestrained(True)
	endif
	if akactor2 == PlayerRef
		Game.SetPlayerAIDriven()
		if Game.GetCameraState() == 0
			Game.ForceThirdPerson()
		endIf
	else
		;akactor2.SetDontMove(True)
		;akactor2.SetRestrained(True)
	endif
	
	if creaturerace == "horse"
		if num == 1
			idleAkactor1 = "SoothingHorseFront";Creature
			idleAkactor2 = "BaboSoothingHorseFront";Woman
			angle = 180
			Xaxis = 0
			Yaxis = 140
		elseif num == 2
			idleAkactor1 = "SoothingHorseFlank"
			idleAkactor2 = "BaboSoothingHorseFlank"
			angle = -90
			Xaxis = 0
			Yaxis = 60
		elseif num == 3
			idleAkactor1 = "SoothingHorseFrontFail"
			idleAkactor2 = "BaboSoothingHorseFrontFail"
			angle = 180
			Xaxis = 0
			Yaxis = 140
		elseif num == 4
			idleAkactor1 = "SoothingHorseFlankFail"
			idleAkactor2 = "BaboSoothingHorseFlankFail"
			angle = -90
			Xaxis = 0
			Yaxis = 60
		endif
	elseif creaturerace == "canine"
		if num == 1
			idleAkactor1 = "SoothingCanineFlank";Creature
			idleAkactor2 = "BaboSoothingCanineFlank";Woman
			;angle = 90
			;Xaxis = 0
			;Yaxis = 50
			
			;Float AngleZB = akactor1.GetAngleZ()
			;Float rMoveXB = (Math.sin(AngleZB) * Yaxis) + (Math.cos(AngleZB) * Xaxis)
			;Float rMoveYB = (Math.cos(AngleZB) * Yaxis) - (Math.sin(AngleZB) * Xaxis)
			;BaboPosPCRef.MoveTo(akactor1, rMoveXB, rMoveYB)
			;Utility.Wait(0.2)
			;akactor2.MoveTo(BaboPosPCRef)
			angle = -90
			Xaxis = 0
			Yaxis = 50
		elseif num == 2
			idleAkactor1 = "SoothingCanineFlankFail";Creature
			idleAkactor2 = "BaboSoothingCanineFlankFail";Woman
			angle = -90
			Xaxis = 0
			Yaxis = 50
		elseif num == 3
			idleAkactor1 = "MountCanineFlank"
			idleAkactor2 = "BaboMountCanineFlank"
			angle = -90
			Xaxis = 100
			Yaxis = 0
		endif
	endif
	BaboPosPCRef.MoveTo(akactor2)

	Utility.Wait(0.5)
	Float AngleZ = akactor2.GetAngleZ()
	Float rMoveX = (Math.sin(AngleZ) * Yaxis) + (Math.cos(AngleZ) * Xaxis)
	Float rMoveY = (Math.cos(AngleZ) * Yaxis) - (Math.sin(AngleZ) * Xaxis)
	
	BaboPosNPCRef.MoveTo(akactor2, rMoveX, rMoveY)
	Utility.Wait(0.5)
	akactor1.MoveTo(BaboPosNPCRef)
	;akactor1.SplineTranslateToRef(akactor1, 1.0, 1.0, 4)
	akactor1.setangle(0, 0, AngleZ + angle)
	Utility.Wait(1.0)
	akactor1.SetVehicle(BaboPosNPCRef)
	akactor2.SetVehicle(BaboPosPCRef)
	Debug.sendanimationevent(akactor1, idleAkactor1)
	Debug.sendanimationevent(akactor2, idleAkactor2)	

else
	idleAkactor1 = None
	idleAkactor2 = None
	if akactor1 == PlayerRef
		Game.SetPlayerAIDriven(false)
		Debug.sendanimationevent(akactor1, "IdleForceDefaultState")
	else
		akactor1.SetDontMove(false)
		akactor1.SetRestrained(false)
		Debug.sendanimationevent(akactor2, "ReturntoDefault")
	endif
	if akactor2 == PlayerRef
		Game.SetPlayerAIDriven(false)
		Debug.sendanimationevent(akactor2, "IdleForceDefaultState")
	else
		akactor2.SetDontMove(false)
		akactor2.SetRestrained(false)
		Debug.sendanimationevent(akactor1, "ReturntoDefault")
	endif
	akactor1.removefromfaction(BaboNPCAnimating)
	akactor2.removefromfaction(BaboNPCAnimating)
	akactor1.SetVehicle(None)
	akactor2.SetVehicle(None)
	if OverridePackage
		ActorUtil.RemovePackageOverride(akactor1, BaboDoNothing)
		ActorUtil.RemovePackageOverride(akactor2, BaboDoNothing)
		akactor1.EvaluatePackage()
		akactor2.EvaluatePackage()
	endif
	
	PrecisionCheck(akactor1, false)
	PrecisionCheck(akactor2, false)
endif

EndFunction

Function CreaturePairedAnimSequence(Actor akactor1, Actor akactor2, int num, string creaturerace, string idleAkactor1, string idleAkactor2)
	int angle
	int Xaxis
	int Yaxis
	if creaturerace == "canine"
		if num == 3
			angle = -90
			Xaxis = 100
			Yaxis = 0
		endif
	endif
	BaboPosPCRef.MoveTo(akactor2)

	Utility.Wait(0.5)
	Float AngleZ = akactor2.GetAngleZ()
	Float rMoveX = (Math.sin(AngleZ) * Yaxis) + (Math.cos(AngleZ) * Xaxis)
	Float rMoveY = (Math.cos(AngleZ) * Yaxis) - (Math.sin(AngleZ) * Xaxis)
	
	BaboPosNPCRef.MoveTo(akactor2, rMoveX, rMoveY)
	Utility.Wait(0.5)
	akactor1.MoveTo(BaboPosNPCRef)
	akactor1.setangle(0, 0, AngleZ + angle)
	Utility.Wait(1.0)
	akactor1.SetVehicle(BaboPosNPCRef)
	akactor2.SetVehicle(BaboPosPCRef)
	Debug.sendanimationevent(akactor1, idleAkactor1)
	Debug.sendanimationevent(akactor2, idleAkactor2)	
EndFunction

Function PairedMotionNPC(actor akactor1, actor akactor2, int num, bool animate)

string idleAkactor1
string idleAkactor2
if animate
	if num == 1
		idleAkactor1 = "Babo_Flirt_A01"
		idleAkactor2 = "Babo_Flirt_A02D"
	elseif num == 2
		idleAkactor1 = "Babo_FlirtBreast_A01"
		idleAkactor2 = "Babo_FlirtBreast_A02"
	elseif num == 3
		idleAkactor1 = "Babo_FlirtPussy_A01"
		idleAkactor2 = "Babo_FlirtPussy_A02"
	elseif num == 4
		idleAkactor1 = "Babo_FlirtFace_A01"
		idleAkactor2 = "Babo_FlirtFace_A02"
	elseif num == 5
		idleAkactor1 = "Babo_FlirtFaceEnd_A01"
		idleAkactor2 = "Babo_FlirtFaceEnd_A02"
	elseif num == 6
		idleAkactor1 = "Babo_Captured_A1"
		idleAkactor2 = "Babo_Captured_A2"
	elseif num == 7
		idleAkactor1 = "Babo_CapturedBoob_A1"
		idleAkactor2 = "Babo_CapturedBoob_A2"
	elseif num == 8
		idleAkactor1 = "Babo_CapturedPussy_A1"
		idleAkactor2 = "Babo_CapturedPussy_A2"
	endif
else
	idleAkactor1 = None
	idleAkactor2 = None
endif

NPCPairedAnim(akactor1, akactor2, animate, idleAkactor1, idleAkactor2)

EndFunction

Function EventPairMotion(Actor akactor, int angle, int Xaxis, int Yaxis, int MotionType, Bool OverridePackage)
	if MotionType > 0
		PrecisionCheck(akactor, true)
		PrecisionCheck(PlayerRef, true)
	endif
	if OverridePackage
		ActorUtil.AddPackageOverride(akactor, BaboDoNothing, 100, 1)
		akactor.EvaluatePackage()
	endif
	akactor.SetRestrained(true)
	akactor.SetDontMove(True)
	
	;Game.DisablePlayerControls(true, true, false, false, true, false, true, false )
	Game.SetPlayerAIDriven() 
	if Game.GetCameraState() == 0
		Game.ForceThirdPerson()
	endIf

	if MotionType == 1
		angle = 180
		Xaxis = 13
		Yaxis = 21
	elseif MotionType == 2
		angle = 180
		Xaxis = 16
		Yaxis = 28
	elseif MotionType == 3
		angle = 180
		Xaxis = 16
		Yaxis = 28
	elseif MotionType == 4
		angle = 180
		Xaxis = 0
		Yaxis = 90
	elseif MotionType == 5
		angle = 180
		Xaxis = 0
		Yaxis = 90
	elseif MotionType == 6;HoldArm
		angle = 0
		Xaxis = -40
		Yaxis = -20
	elseif MotionType == 7;Fronthug
		angle = 180
		Xaxis = 0
		Yaxis = 50
	endif

	Utility.Wait(0.5)
	Float AngleZ = PlayerRef.GetAngleZ()
	Float rMoveX = (Math.sin(AngleZ) * Yaxis) + (Math.cos(AngleZ) * Xaxis)
	Float rMoveY = (Math.cos(AngleZ) * Yaxis) - (Math.sin(AngleZ) * Xaxis)
	
	BaboPosNPCRef.MoveTo(PlayerRef, rMoveX, rMoveY)
	
	Utility.Wait(0.5)
	akactor.MoveTo(BaboPosNPCRef)
	akactor.setangle(0, 0, AngleZ + angle)
	Utility.Wait(0.5)


	if MotionType == 1
		Debug.sendanimationevent(akactor, "BaboWombHitM");x 13 y 21 rotation 180
		Debug.sendanimationevent(PlayerRef, "BaboWombHit")
		Utility.wait(1.0)
		MiscSound(akactor, 1)
		UseSexlabVoice(PlayerRef, true)
		Utility.wait(2.0)
		UseSexlabVoice(PlayerRef, true)
		akactor.SetRestrained(False)
		akactor.SetDontMove(False)
		PlayerRef.DamageActorValue("Health", 60.0)
		Utility.wait(1.0)
		UseSexlabVoice(PlayerRef, true)
		PrecisionCheck(akactor, false)
		PrecisionCheck(PlayerRef, false)
	elseif MotionType == 2
		Debug.sendanimationevent(akactor, "BaboRopeHitM");x 16 y 28 rotation 180
		Debug.sendanimationevent(PlayerRef, "BaboRopeHit")
		Utility.wait(1.3)
		MiscSound(akactor, 1)
		PlayerRef.DamageActorValue("Health", 80.0)
		UseSexlabVoice(PlayerRef, true)
		akactor.SetRestrained(False)
		akactor.SetDontMove(False)
		Utility.wait(1.0)
		UseSexlabVoice(PlayerRef, true)
		PrecisionCheck(akactor, false)
		PrecisionCheck(PlayerRef, false)
	elseif MotionType == 3
		Debug.sendanimationevent(akactor, "BaboRopePreHitM");x 16 y 28 rotation 180
		Debug.sendanimationevent(PlayerRef, "BaboRopePreHit")
	elseif MotionType == 4
		Debug.sendanimationevent(akactor, "BaboCrouchM");x 0 y 90 rotation 180
		Debug.sendanimationevent(PlayerRef, "BaboFaintF")
		Utility.wait(1.3)
		UseSexlabVoice(PlayerRef, true)
		akactor.SetRestrained(False)
		akactor.SetDontMove(False)
		PrecisionCheck(akactor, false)
		PrecisionCheck(PlayerRef, false)
	elseif MotionType == 5
		Debug.sendanimationevent(akactor, "BaboCrouchM_S");x 0 y 90 rotation 180
		Debug.sendanimationevent(PlayerRef, "BaboFaintF_S")
		Utility.wait(1.3)
		UseSexlabVoice(PlayerRef, true)
		Utility.wait(3.0)
		UseSexlabVoice(PlayerRef, true)
	elseif MotionType == 6
		Debug.sendanimationevent(akactor, "BaboHoldArmM");x -40 y -20 rotation 0
		Debug.sendanimationevent(PlayerRef, "BaboHoldArmF")
		Utility.wait(1.3)
		UseSexlabVoice(PlayerRef, true)
	elseif MotionType == 7
		Debug.sendanimationevent(akactor, "BaboFrontHugStartM");x 0 y 50 rotation 180
		Debug.sendanimationevent(PlayerRef, "BaboFrontHugStartF")
		;Utility.wait(1.3)
		;UseSexlabVoice(PlayerRef, true)
	else
		Debug.sendanimationevent(akactor, "IdleForceDefaultState")
		akactor.SetRestrained(False)
		akactor.SetDontMove(False)
		Game.SetPlayerAIDriven(false)
		PrecisionCheck(akactor, false)
		PrecisionCheck(PlayerRef, false)
	endif
	if OverridePackage
		ActorUtil.RemovePackageOverride(akactor, BaboDoNothing)
		akactor.EvaluatePackage()
	endif
	
EndFunction

Function NPCPairedAnim(Actor Victim, Actor Aggressor, Bool Animate = True, string VictimAnim, string AggressorAnim)
	If Animate
		PrecisionCheck(Aggressor, true)
		PrecisionCheck(Victim, true)
		ActorUtil.AddPackageOverride(Aggressor, BaboDoNothing, 100, 1)
		Aggressor.EvaluatePackage()
		Aggressor.SetRestrained(True)
		Aggressor.SetDontMove(True)
		
		ActorUtil.AddPackageOverride(Victim, BaboDoNothing, 100, 1)
		Victim.EvaluatePackage()
		Victim.SetRestrained()
		Victim.SetDontMove(True)

		BaboPosNPCRef.MoveTo(Aggressor) ; PosRef
		Float AngleZ = Victim.GetAngleZ()
		Aggressor.MoveTo(Victim, 0.0 * Math.Sin(AngleZ), 0.0 * Math.Cos(AngleZ))
		Victim.SetVehicle(BaboPosNPCRef) ; PosRef
		Aggressor.SetVehicle(BaboPosNPCRef) ; PosRef
		If !Victim.isinfaction(BaboNPCAnimating) && !Aggressor.isinfaction(BaboNPCAnimating)
			Debug.SendAnimationEvent(Aggressor, "IdleForceDefaultState")
			Debug.SendAnimationEvent(Victim, "IdleForceDefaultState")
		Endif
		Utility.wait(1.0)
		Aggressor.MoveTo(Victim, 0.0 * Math.Sin(AngleZ), 0.0 * Math.Cos(AngleZ))
		Debug.sendanimationevent(Victim, VictimAnim)
		Debug.sendanimationevent(Aggressor, AggressorAnim)
		;Victim.playidle(VictimAnim)
		;Aggressor.playidle(AggressorAnim)
		Victim.addtofaction(BaboNPCAnimating)
		Aggressor.addtofaction(BaboNPCAnimating)
	Else
		Victim.SetVehicle(None)
		Aggressor.SetVehicle(None)
		Victim.SetRestrained(False)
		Victim.SetDontMove(False)
		Aggressor.SetRestrained(False)
		Aggressor.SetDontMove(False)
		ActorUtil.RemovePackageOverride(Aggressor, BaboDoNothing)
		ActorUtil.RemovePackageOverride(Victim, BaboDoNothing)
		
		if Aggressor.haskeyword(ActorTypeNPC)
			Debug.SendAnimationEvent(Aggressor, "IdleForceDefaultState")
		else
			Debug.SendAnimationEvent(Aggressor, "IdleStop")
		endif
		
		Debug.SendAnimationEvent(Victim, "IdleForceDefaultState")
		Victim.removefromfaction(BaboNPCAnimating)
		Aggressor.removefromfaction(BaboNPCAnimating)
		PrecisionCheck(Aggressor, false)
		PrecisionCheck(Victim, false)
	Endif
EndFunction

Function NPCPairedAnimSequence(Actor Victim, Actor Aggressor, string VictimAnim, string AggressorAnim)
	Float AngleZ = Victim.GetAngleZ()
	Aggressor.MoveTo(Victim, 0.0 * Math.Sin(AngleZ), 0.0 * Math.Cos(AngleZ))
	Debug.sendanimationevent(Victim, VictimAnim)
	Debug.sendanimationevent(Aggressor, AggressorAnim)
EndFunction

Function SimpleAnmSequence(Actor actor1, Actor actor2, string actor1string, string actor2string)
	Debug.sendanimationevent(actor1, actor1string)
	Debug.sendanimationevent(actor2, actor2string)
EndFunction

Function SOSSize()
	if  Quest.GetQuest("SOS_Misc")
		SOSAPIQuest = Game.GetFormFromFile(0x1eda4, "Schlongs of Skyrim.esp") as SOS_API
		SOS_Quest = Game.GetFormFromFile(0x000D62, "Schlongs of Skyrim.esp") as SOS_SetupQuest_Script
	else
		return
	endif
	SOSAPIQuest.AddRace(BakaGiantOrcRace)
EndFunction

Function FindSOSAddon()
if Quest.GetQuest("SOS_Addon_VectorPlexusRegular_Quest")
	SOS_Addon_VectorPlexusRegular_Quest = Game.GetFormFromFile(0x000D62, "SOS - VectorPlexus Regular Addon.esp") as SOS_AddonQuest_Script
endif
if Quest.GetQuest("SOS_Addon_VectorPlexusMuscular_Quest")
	SOS_Addon_VectorPlexusMuscular_Quest = Game.GetFormFromFile(0x000D62, "SOS - VectorPlexus Muscular Addon.esp") as SOS_AddonQuest_Script
endif
EndFunction

Function AssignSchlong(Actor akActor, int idSize = 6, bool bforce = true)
Form newAddon
	if SOS_Addon_VectorPlexusRegular_Quest
		newAddon = SOS_Addon_VectorPlexusRegular_Quest
	elseif SOS_Addon_VectorPlexusMuscular_Quest
		newAddon = SOS_Addon_VectorPlexusMuscular_Quest
	else
		newAddon = SOS_Data.GetAddon(0)
	endif
	If !newAddon
		Return
	EndIf

	bool addonCompatible = IsSchlongCompatible(newAddon, akActor, akActor.GetLeveledActorBase().GetSex())
		If addonCompatible || bforce
			SOS_Quest.SetSchlong(akActor, newAddon, true)
			SchlongSizeSliderAccept(akActor, idSize)
		EndIf
EndFunction

Function SchlongSizeSliderAccept(Actor akActor, int size)
	Form addon = SOS_Quest.GetActiveAddon(akActor)
	If addon
		SOS_Quest.SetSchlongSize(addon, akActor, size)
	EndIf
EndFunction

bool Function IsSchlongCompatible(Form addon, Actor akActor, Int sex)
	bool addonCompatible = SOS_Quest.IsSchlongRaceCompatible(addon, akActor) && SOS_Quest.IsSchlongGenderAllowed(addon, sex)
	return addonCompatible
EndFunction

Function BaboEvent11ScenePlay(int i);Because of an unknown bug, play scene code doesn't operate through Quest tif script.
	if i == 1
		BaboEncounter11Scene01.forcestart()
	elseif i == 2
		BaboEncounter11Scene02.forcestart()
	elseif i == 3
		BaboEncounter11Scene03.forcestart()
	elseif i == 4
		BaboEncounter11Scene04.forcestart()
	endif
EndFunction

Function BCLEvent05ScenePlay(int i)
	if i == 2
		BaboChangeLocationEvent05Scene02.forcestart()
	elseif i == 3
		BaboChangeLocationEvent05Scene03.forcestart()
	elseif i == 4
		BaboChangeLocationEvent05Scene04.forcestart()
	endif
EndFunction

Function BCLEvent06ScenePlay(int i)
	if i == 5
		BaboChangeLocationEvent06Scene05.forcestart()
	elseif i == 6
		BaboChangeLocationEvent06Scene06.forcestart()
	endif
EndFunction

Function BCLEvent01ScenePlay(int i)
	if i == 1
		BaboChangeLocationEvent01Scene01.forcestart()
	elseif i == 2
		BaboChangeLocationEvent01Scene02.forcestart()
	elseif i == 3
		BaboChangeLocationEvent01Scene03.forcestart()
	elseif i == 4
		BaboChangeLocationEvent01Scene04.forcestart()
	elseif i == 5
		BaboChangeLocationEvent01Scene05.forcestart()
	elseif i == 6
		BaboChangeLocationEvent01Scene06.forcestart()
	else
		BaboChangeLocationEvent01Scene05.stop()
		BaboChangeLocationEvent01Scene06.stop()
	endif
endfunction

Function BCLEvent07ScenePlay(int i);Because of an unknown bug, play scene code doesn't operate through Quest tif script.
	if i == 0
		BaboChangeLocationEvent07Scene00.forcestart()
	elseif i == 1
		BaboChangeLocationEvent07SceneWellRested.forcestart()
	elseif i == 2
		BaboChangeLocationEvent07Scene04.forcestart()
	elseif i == 3
		BaboChangeLocationEvent07Scene03.forcestart()
	elseif i == 4
		BaboChangeLocationEvent07Scene02.forcestart()
	elseif i == 5
		BaboChangeLocationEvent07Scene05.forcestart()
	elseif i == 6
		BaboChangeLocationEvent07Scene06.forcestart()
	endif
EndFunction

Function BEventAnimalCareMarkarthScenePlay(int i)
	if i == 0
		BaboEventAnimalCareMarkarthSceneStart.forcestart()
	elseif i == 1
		BaboEventAnimalCareMarkarthScene01.forcestart()
	elseif i == 2
		BaboEventAnimalCareMarkarthScene02.forcestart()
	elseif i == 3
		BaboEventAnimalCareMarkarthScene03.forcestart()
	elseif i == 4
		BaboEventAnimalCareMarkarthScene04.forcestart()
	elseif i == 5
		BaboEventAnimalCareMarkarthScene05.forcestart()
	elseif i == 6
		BaboEventAnimalCareMarkarthScene06.forcestart()
	elseif i == 7
		BaboEventAnimalCareMarkarthScene07.forcestart()
	endif
EndFunction

Function BCLEvent08ScenePlay(int i);Because of an unknown bug, play scene code doesn't operate through Quest tif script.
EndFunction

Function ActorStore(Actor akactor)
	akactor.moveto(BaboDumpsterRef)
EndFunction

Function StalkerActorStore(ReferenceAlias akRef);At the end of package
Actor akactor = akRef.GetReference() as actor
	ActorStore(akactor)
	BaboStalkerList.addform(akactor)
EndFunction

Function GetEdibleFormlist(actor akactor, int index, int Howmany, bool randomB)
int ri
int listsize
listsize = BaboEdibleCheapFormList.getsize()
if randomB
	while Howmany > 0
		ri = Utility.randomint(0, listsize - 1)
		akactor.additem(BaboEdibleCheapFormList.getat(ri) as form, 1)
		Howmany -= 1
	endwhile
else
	akactor.additem(BaboEdibleCheapFormList.getat(index) as form, Howmany)
endif
EndFunction

Function GetEdibleSusFormlist(actor akactor, int index, int Howmany, bool randomB)
int ri
int listsize
listsize = BaboEdibleCheapSusFormList.getsize()
if randomB
	while Howmany > 0
		ri = Utility.randomint(0, listsize - 1)
		akactor.additem(BaboEdibleCheapSusFormList.getat(ri) as form, 1)
		Howmany -= 1
	endwhile
else
	akactor.additem(BaboEdibleCheapSusFormList.getat(index) as form, Howmany)
endif
EndFunction

Bool Function BCLEvent08ActorCheck()
int sizeint = BaboChangeLocationEvent08WindhelmList.getsize()
	if sizeint > 0
		return true
	else
		return false
	endif
EndFunction

Function CL08StalkerActorStore(ReferenceAlias akRef, int LocationNumber)
Actor akactor = akRef.GetReference() as actor
int ListNumber
	ActorStore(akactor)
	if LocationNumber == 1
		BaboCL08WindhelmStalkerList.addform(akactor)
		ListNumber = BaboCL08WindhelmStalkerList.getsize()
		BaboChangeLocation08FraudWindhelm.setvalue(ListNumber)
	elseif LocationNumber == 2
		BaboCL08RiftenStalkerList.addform(akactor)
		ListNumber = BaboCL08RiftenStalkerList.getsize()
		BaboChangeLocation08FraudRiften.setvalue(ListNumber)
	elseif LocationNumber == 3
		BaboCL08SolitudeStalkerList.addform(akactor)
		ListNumber = BaboCL08SolitudeStalkerList.getsize()
		BaboChangeLocation08FraudSolitude.setvalue(ListNumber)
	elseif LocationNumber == 4
		BaboCL08BYOH01StalkerList.addform(akactor)
		ListNumber = BaboCL08BYOH01StalkerList.getsize()
		BaboChangeLocation08FraudBYOH01.setvalue(ListNumber)
	elseif LocationNumber == 5
		BaboCL08BYOH02StalkerList.addform(akactor)
		ListNumber = BaboCL08BYOH02StalkerList.getsize()
		BaboChangeLocation08FraudBYOH02.setvalue(ListNumber)
	elseif LocationNumber == 6
		BaboCL08BYOH03StalkerList.addform(akactor)
		ListNumber = BaboCL08BYOH03StalkerList.getsize()
		BaboChangeLocation08FraudBYOH03.setvalue(ListNumber)
	elseif LocationNumber == 7
		BaboCL08RavenRockStalkerList.addform(akactor)
		ListNumber = BaboCL08RavenRockStalkerList.getsize()
		BaboChangeLocation08Fraudsolstheim.setvalue(ListNumber)
	else
		BaboCL08MiscStalkerList.addform(akactor)
		ListNumber = BaboCL08MiscStalkerList.getsize()
		BaboChangeLocation08FraudMIsc.setvalue(ListNumber)
	endif
EndFunction

Function BCLEvent08ActorStore(ReferenceAlias akRef, int LocationNumber);At the end of package
Actor akactor = akRef.GetReference() as actor
int ListNumber
	BCLEvent08ActorFanFaction(akactor)
	if LocationNumber == 1
		BaboChangeLocationEvent08WindhelmList.addform(akactor)
		ListNumber = BaboChangeLocationEvent08WindhelmList.getsize()
		BaboChangeLocation08FanWindhelm.setvalue(ListNumber)
	elseif LocationNumber == 2
		BaboChangeLocationEvent08RiftenList.addform(akactor)
		ListNumber = BaboChangeLocationEvent08RiftenList.getsize()
		BaboChangeLocation08FanRiften.setvalue(ListNumber)
	elseif LocationNumber == 3
		BaboChangeLocationEvent08SolitudeList.addform(akactor)
		ListNumber = BaboChangeLocationEvent08SolitudeList.getsize()
		BaboChangeLocation08FanSolitude.setvalue(ListNumber)
	elseif LocationNumber == 4
		BaboChangeLocationEvent08BYOH01List.addform(akactor)
		ListNumber = BaboChangeLocationEvent08BYOH01List.getsize()
		BaboChangeLocation08FanBYOH01.setvalue(ListNumber)
	elseif LocationNumber == 5
		BaboChangeLocationEvent08BYOH02List.addform(akactor)
		ListNumber = BaboChangeLocationEvent08BYOH02List.getsize()
		BaboChangeLocation08FanBYOH02.setvalue(ListNumber)
	elseif LocationNumber == 6
		BaboChangeLocationEvent08BYOH03List.addform(akactor)
		ListNumber = BaboChangeLocationEvent08BYOH03List.getsize()
		BaboChangeLocation08FanBYOH03.setvalue(ListNumber)
	elseif LocationNumber == 7
		BaboChangeLocationEvent08SolstheimList.addform(akactor)
		ListNumber = BaboChangeLocationEvent08SolstheimList.getsize()
		BaboChangeLocation08Fansolstheim.setvalue(ListNumber)
	elseif LocationNumber == 20
		BaboChangeLocationEvent08Custom01List.addform(akactor)
		ListNumber = BaboChangeLocationEvent08Custom01List.getsize()
		BaboChangeLocation08FanCustom01.setvalue(ListNumber)
	elseif LocationNumber == 21
		BaboChangeLocationEvent08Custom02List.addform(akactor)
		ListNumber = BaboChangeLocationEvent08Custom02List.getsize()
		BaboChangeLocation08FanCustom02.setvalue(ListNumber)
	elseif LocationNumber == 22
		BaboChangeLocationEvent08Custom03List.addform(akactor)
		ListNumber = BaboChangeLocationEvent08Custom03List.getsize()
		BaboChangeLocation08FanCustom03.setvalue(ListNumber)
	else
		;Misc
	endif
EndFunction

Function BCLEvent08ActorFanFaction(actor akactor)
if akactor.isinfaction(BaboChangeLocationEvent08FanFaction)
	akactor.setfactionrank(BaboChangeLocationEvent08FanFaction, akactor.getfactionrank(BaboChangeLocationEvent08FanFaction) + 1)
else
	akactor.removefromfaction(BaboChangeLocationEvent08Faction)
	akactor.addtofaction(BaboChangeLocationEvent08FanFaction)
endif
EndFunction

actor Function BCLEvent08ActorRecycle()
int listsize
;int ri = Utility.randomint(1, 100)
Actor MaybeFan

listsize = BaboChangeLocationEvent08WindhelmList.getsize()

MaybeFan = BaboChangeLocationEvent08WindhelmList.getat(0) as actor
;BaboChangeLocationEvent08List.RemoveAddedForm(MaybeFan)

return MaybeFan
EndFunction


Function BCLEventScenePlay(int i, String EventName)
if EventName == "BaboChangeLocationEvent07"
	if i == 1
		BaboChangeLocationEvent07SceneWellRested.forcestart()
	elseif i == 2
		BaboChangeLocationEvent07Scene04.forcestart()
	elseif i == 3
		BaboChangeLocationEvent07Scene03.forcestart()
	endif
elseif EventName == "BaboChangeLocationEvent08"
	if i == 1
		BaboChangeLocationEvent08AutographScene01.forcestart()
	elseif i == 2
		BaboChangeLocationEvent08AutographScene02.forcestart()
	elseif i == 3
		BaboChangeLocationEvent08AutographScene03.forcestart()
	elseif i == 4
		BaboChangeLocationEvent08AutographScene04.forcestart()
	elseif i == 5
		BaboChangeLocationEvent08AutographScene05.forcestart()
	elseif i == 6
		BaboChangeLocationEvent08AutographScene06.forcestart()
	endif
elseif EventName == "BaboChangeLocationEvent02"
	if i == 1
		BaboChangeLocationEvent02Scene01.forcestart()
	elseif i == 2
		BaboChangeLocationEvent02Scene02.forcestart()
	endif
elseif EventName == "BaboChangeLocationEvent02Coast"
	if i == 1
		BaboChangeLocationEvent02CoastScene01.forcestart()
	endif
elseif EventName == "BaboChangeLocationEvent02Forest"
	if i == 1
		BaboChangeLocationEvent02ForestScene01.forcestart()
	endif
elseif EventName == "BaboChangeLocationEvent02ForestSnow"
	if i == 1
		BaboChangeLocationEvent02ForestSnowScene01.forcestart()
	endif
elseif EventName == "BaboChangeLocationEvent02Marsh"
	if i == 1
		BaboChangeLocationEvent02MarshScene01.forcestart()
	endif
elseif EventName == "BaboChangeLocationEvent02Mountain"
	if i == 1
		BaboChangeLocationEvent02MountainScene01.forcestart()
	endif
elseif EventName == "BaboChangeLocationEvent02MountainSnow"
	if i == 1
		BaboChangeLocationEvent02MountainSnowScene01.forcestart()
	endif
elseif EventName == "BaboChangeLocationEvent02Plain"
	if i == 1
		BaboChangeLocationEvent02PlainScene01.forcestart()
	endif
elseif EventName == "BaboChangeLocationEvent02PlainSnow"
	if i == 1
		BaboChangeLocationEvent02PlainSnowScene01.forcestart()
	endif
elseif EventName == "BaboEventAnimalCare"
	if i == 1
		BaboEventAnimalCareSceneHorse01.forcestart()
	endif
elseif EventName == "BaboEncounter01"
	if i == 1
		BaboEncounter01Scene01.forcestart()
	elseif i == 2
		BaboEncounter01Scene02.forcestart()
	elseif i == 3
		BaboEncounter01Scene03.forcestart()
	elseif i == 4
		BaboEncounter01Scene04.forcestart()
	elseif i == 5
		BaboEncounter01Scene05.forcestart()
	else
		BaboEncounter01Scene02.stop()
		BaboEncounter01Scene05.stop()
	endif
elseif EventName == "BaboEncounter03"
	if i == 1
		BaboEncounter03Scene01.forcestart()
	elseif i == 2
		BaboEncounter03Scene02.forcestart()
	elseif i == 3
		BaboEncounter03Scene03.forcestart()
	endif
elseif EventName == "BaboEncounter04"
	if i == 1
		BaboEncounter04Scene01.forcestart()
	elseif i == 2
		BaboEncounter04Scene02.forcestart()
	elseif i == 3
		BaboEncounter04Scene03.forcestart()
	endif
elseif EventName == "BaboEncounter05"
	if i == 1
		BaboEncounter05Scene01.forcestart()
	elseif i == 2
		BaboEncounter05Scene02.forcestart()
	endif
elseif EventName == "BaboEncounter07"
	if i == 1
		BaboEncounter07Scene01.forcestart()
	elseif i == 2
		BaboEncounter07Scene02.forcestart()
	elseif i == 3
		BaboEncounter07Scene03.forcestart()
	elseif i == 4
		BaboEncounter07Scene04.forcestart()
	elseif i == 5
		BaboEncounter07Scene05.forcestart()
	else
		BaboEncounter07Scene01.stop()
		BaboEncounter07Scene02.stop()
		BaboEncounter07Scene03.stop()
	endif
elseif EventName == "BaboEncounter09"
	if i == 1
		BaboEncounter09Scene01.forcestart()
	elseif i == 2
		BaboEncounter09Scene02.forcestart()
	endif
elseif EventName == "BaboEncounter11"
	if i == 1
		BaboEncounter11Scene01.forcestart()
	elseif i == 2
		BaboEncounter11Scene02.forcestart()
	elseif i == 3
		BaboEncounter11Scene03.forcestart()
	elseif i == 4
		BaboEncounter11Scene04.forcestart()
	endif
elseif EventName == "BaboEncounter13"
	if i == 1
		BaboEncounter13SceneStart.forcestart()
	elseif i == 2
		BaboEncounter13SceneBeforeFight.forcestart();goto 120
	elseif i == 3
		BaboEncounter13SceneIgnore.forcestart();goto 105
	elseif i == 4
		BaboEncounter13SceneNoFight.forcestart()
	elseif i == 5
		BaboEncounter13PayDebt.forcestart()
	elseif i == 6
		BaboEncounter13SceneDefeated.forcestart()
	endif
elseif EventName == "BaboEventMarkarthGuard"
	if i == 1
		BaboEventMarkarthGuardScene00a.forcestart()
	elseif i == 2
		BaboEventMarkarthGuardScene00b.forcestart()
	elseif i == 3
		BaboEventMarkarthGuardScene01.forcestart()
	elseif i == 4
		BaboEventMarkarthGuardScene02.forcestart()
	endif
endif
EndFunction



;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;\\\\\\\\\\\\\\\\\ Event Area \\\\\\\\\\\\\\\\\\\\\
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

;Event BSCEnd(int tid, bool HasPlayer)
;	Actor[] actors = sexlab.HookActors(tid)
;	sslBaseAnimation anim = sexlab.HookAnimation(tid)
;EndEvent

Event MerchantOrcSex01(string eventName, string argString, float argNum, form sender)
	Actor Victim = SexLab.HookActors(argString)[0]
	Actor Raper01 = SexLab.HookActors(argString)[1]
	actor[] sexActors = new actor[2]
	sexActors[0] = Victim
	sexActors[1] = Raper01
	sslBaseAnimation[] anims
	anims = SexLab.GetAnimationsByTag(2, "MF", "Sex", "Vaginal" ,  TagSuppress = "Femdom")
	RegisterForModEvent("AnimationEnd_MOS02", "MerchantOrcSex02")
	SexLab.StartSex(sexActors, anims, hook="MOS02")
EndEvent

Event MerchantOrcSex02(string eventName, string argString, float argNum, form sender)
	Actor Victim = SexLab.HookActors(argString)[0]
	Actor Raper01 = SexLab.HookActors(argString)[1]
	actor[] sexActors = new actor[2]
	sexActors[0] = Victim
	sexActors[1] = Raper01
	sslBaseAnimation[] anims
	anims = SexLab.GetAnimationsByTag(2, "MF", "Aggressive", "Vaginal" ,  TagSuppress = "Femdom")
	SexLab.StartSex(sexActors, anims, victim=sexActors[0])
EndEvent

Event AfterSexSceneHireling(string eventName, string argString, float argNum, form sender)
	(BaboDialogueHirelings as BaboDialogueHirelingsQuest).AfterRapeSceneStart()
EndEvent

Event LoanSharkAfterSexTest(string eventName, string argString, float argNum, form sender)
	Debug.messagebox("BaboSexControllerManager Test Complete")
;	UnregisterForModEvent("AnimationEnd_LSASTest")
EndEvent

Function DraggingtoSexMarket()
	If BaboSimpleSlavery.getvalue() == 1
		sendModEvent("SSLV Entry")
	EndIf
EndFunction

Event CLEvent06GuardSex01(string eventName, string argString, float argNum, form sender)
	(BaboDialogueCLEvent06 as BaboDialogueCLEvent06Script).GuardSexEventEnd()
;	UnregisterForModEvent("AnimationEnd_CL06AS01")
EndEvent

Event ChangeLocationEvent01Sex01(string eventName, string argString, float argNum, form sender)
	RandomExhaustionIdle(PlayerRef)
	Utility.wait(2.0)
	BaboChangeLocationEvent01.setstage(32)
EndEvent

Event ChangeLocationEvent01Sex02(string eventName, string argString, float argNum, form sender)
	RandomExhaustionIdle(PlayerRef)
	Utility.wait(2.0)
	BaboChangeLocationEvent01.setstage(33)
EndEvent

Event ChangeLocationEvent02(string eventName, string argString, float argNum, form sender)
	If BaboChangeLocationEvent02.getstage() < 30
		BaboChangeLocationEvent02.setstage(30)
	ElseIf BaboChangeLocationEvent02.getstage() == 30
		BaboChangeLocationEvent02.setstage(40)
	EndIf
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event ChangeLocationEvent02Ex(string eventName, string argString, float argNum, form sender)
	If BaboChangeLocationEvent02.getstage() < 30
		BaboChangeLocationEvent02.setstage(25)
	elseif BaboChangeLocationEvent02.getstage() == 25
		BaboChangeLocationEvent02.setstage(31)
	EndIf
	RandomExhaustionIdle(PlayerRef)
EndEvent


Event ChangeLocationEvent02Coast(string eventName, string argString, float argNum, form sender)
	If BaboChangeLocationEvent02Coast.getstage() == 20
		BaboChangeLocationEvent02Coast.setstage(30)
	ElseIf BaboChangeLocationEvent02Coast.getstage() == 30
		BaboChangeLocationEvent02Coast.setstage(40)
	EndIf
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event ChangeLocationEvent02Forest(string eventName, string argString, float argNum, form sender)
	If BaboChangeLocationEvent02Forest.getstage() == 20
		BaboChangeLocationEvent02Forest.setstage(30)
	ElseIf BaboChangeLocationEvent02Forest.getstage() == 30
		BaboChangeLocationEvent02Forest.setstage(40)
	EndIf
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event ChangeLocationEvent02ForestSnow(string eventName, string argString, float argNum, form sender)
	If BaboChangeLocationEvent02ForestSnow.getstage() == 20
		BaboChangeLocationEvent02ForestSnow.setstage(30)
	ElseIf BaboChangeLocationEvent02ForestSnow.getstage() == 30
		BaboChangeLocationEvent02ForestSnow.setstage(40)
	EndIf
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event ChangeLocationEvent02Marsh(string eventName, string argString, float argNum, form sender)
	If BaboChangeLocationEvent02Marsh.getstage() == 20
		BaboChangeLocationEvent02Marsh.setstage(30)
	ElseIf BaboChangeLocationEvent02Marsh.getstage() == 30
		BaboChangeLocationEvent02Marsh.setstage(40)
	EndIf
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event ChangeLocationEvent02Mountain(string eventName, string argString, float argNum, form sender)
	If BaboChangeLocationEvent02Mountain.getstage() == 20
		BaboChangeLocationEvent02Mountain.setstage(30)
	ElseIf BaboChangeLocationEvent02Mountain.getstage() == 30
		BaboChangeLocationEvent02Mountain.setstage(40)
	EndIf
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event ChangeLocationEvent02MountainSnow(string eventName, string argString, float argNum, form sender)
	If BaboChangeLocationEvent02MountainSnow.getstage() == 20
		BaboChangeLocationEvent02MountainSnow.setstage(30)
	ElseIf BaboChangeLocationEvent02MountainSnow.getstage() == 30
		BaboChangeLocationEvent02MountainSnow.setstage(40)
	EndIf
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event ChangeLocationEvent02Plain(string eventName, string argString, float argNum, form sender)
	If BaboChangeLocationEvent02Plain.getstage() == 20
		BaboChangeLocationEvent02Plain.setstage(30)
	ElseIf BaboChangeLocationEvent02Plain.getstage() == 30
		BaboChangeLocationEvent02Plain.setstage(40)
	EndIf
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event ChangeLocationEvent02PlainSnow(string eventName, string argString, float argNum, form sender)
	If BaboChangeLocationEvent02PlainSnow.getstage() == 20
		BaboChangeLocationEvent02PlainSnow.setstage(30)
	ElseIf BaboChangeLocationEvent02PlainSnow.getstage() == 30
		BaboChangeLocationEvent02PlainSnow.setstage(40)
	EndIf
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event ChangeLocationEvent02DLC02(string eventName, string argString, float argNum, form sender)

	If BaboChangeLocationEvent02DLC02.getstage() == 20
		BaboChangeLocationEvent02DLC02.setstage(30)
	ElseIf BaboChangeLocationEvent02DLC02.getstage() == 30
		BaboChangeLocationEvent02DLC02.setstage(40)
		;UnregisterForModEvent("AnimationEnd_CLEvent02DLC02")
	EndIf
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event ChangeLocationEvent05Sex01(string eventName, string argString, float argNum, form sender)
	BaboChangeLocationEvent05.setstage(15)
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event ChangeLocationEvent05Sex02(string eventName, string argString, float argNum, form sender)
	BaboChangeLocationEvent05.setstage(25)
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event ChangeLocationEvent08(string eventName, string argString, float argNum, form sender)
	If BaboChangeLocationEvent08.getstage() == 48;Rape
		RandomExhaustionIdle(PlayerRef)
		BaboChangeLocationEvent08.setstage(55)
	ElseIf BaboChangeLocationEvent08.getstage() == 50;Normal sex
		BaboChangeLocationEvent08.setstage(56)
	EndIf
EndEvent

Event Encounter01Sex01(string eventName, string argString, float argNum, form sender)
	;BaboEncounter01.setstage(60)
	BaboEncounter01Scene01.forcestart()
	;RandomExhaustionIdle(PlayerRef)
	;Play 
EndEvent

Event Encounter01Sex02(string eventName, string argString, float argNum, form sender)
	BaboEncounter01.setstage(75)
	;RandomExhaustionIdle(PlayerRef)
EndEvent

Event Encounter03Sex01(string eventName, string argString, float argNum, form sender)
	BaboEncounter03.setstage(18)
EndEvent

Event Encounter03Sex02(string eventName, string argString, float argNum, form sender)
	BCLEventScenePlay(2, "BaboEncounter03")
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event Encounter03Sex03(string eventName, string argString, float argNum, form sender)
	BCLEventScenePlay(1, "BaboEncounter03")
	PlayerRef.SetUnconscious(false)
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event Encounter04Sex01(string eventName, string argString, float argNum, form sender)
	BaboEncounter04.setstage(10)
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event Encounter04Sex02(string eventName, string argString, float argNum, form sender)
	BaboEncounter04.setstage(25)
EndEvent

Event Encounter04Sex03(string eventName, string argString, float argNum, form sender)
	BaboEncounter04.setstage(30)
EndEvent

Event Encounter07Sex01(string eventName, string argString, float argNum, form sender)
	BaboEncounter07.setstage(12)
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event Encounter07Sex02(string eventName, string argString, float argNum, form sender)
	BaboEncounter07.setstage(37)
EndEvent

Event Encounter09SexNPC(string eventName, string argString, float argNum, form sender)
	If BaboEncounter09.getstage() == 0
		BaboEncounter09.setstage(3)
	EndIf
EndEvent

Event Encounter09Sex01(string eventName, string argString, float argNum, form sender)
	If BaboEncounter09.getstage() == 20
		BaboEncounter09.setstage(30)
	EndIf
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event Encounter11Sex01(string eventName, string argString, float argNum, form sender)
	BaboEncounter11.setstage(50)
	RandomExhaustionIdle(PlayerRef)
EndEvent

Event Encounter13Sex01(string eventName, string argString, float argNum, form sender)
	BaboEncounter13.setstage(127)
	BaboEncounter13SceneAfterSex.forcestart()
	Debug.SendAnimationEvent(PlayerRef, "BaboDefeatedCollapseLoop01")
;	UnregisterForModEvent("AnimationEnd_CL06AS01")
EndEvent

Event TRIInitialSex(string eventName, string argString, float argNum, form sender)
	Actor Actor01 = SexLab.HookActors(argString)[0]
	Actor Actor02 = SexLab.HookActors(argString)[1]
	RandomExhaustionIdle(Actor01)
	SexCustomActor(Actor01, Actor02, None, None, None, "Aggressive", "CF", "Vaginal", True, "BABO_TRIInitialSex02", "TRIInitialSex02", true)
EndEvent

Event TRIInitialSex02(string eventName, string argString, float argNum, form sender)
	(BaboEventRieklingThirsk as BaboEventRiekling).AfterinitialSex(SexLab.HookActors(argString)[1])
EndEvent

Event TRIInitialThreesome(string eventName, string argString, float argNum, form sender)
	(BaboEventRieklingThirsk as BaboEventRiekling).RieklingMinionsGettoPlayer02()
EndEvent

Event TRIInitialThreesome02(string eventName, string argString, float argNum, form sender)
	BaboEventRieklingThirsk.setstage(45)
EndEvent

Event TRIThreesomeAfter(string eventName, string argString, float argNum, form sender)
	Actor Actor01 = SexLab.HookActors(argString)[0]
	Actor Actor02 = SexLab.HookActors(argString)[1]
	Actor Actor03 = SexLab.HookActors(argString)[2]
	BadRieklingDuelMessagebox(15)
	SexCustomActor(Actor01, Actor02, Actor03, None, None, "Aggressive", "CCF", "Threesome", True, "BABO_TRIThreesomeAfter02", "TRIThreesomeAfter02", true)
	;UnregisterForModEvent("AnimationEnd_TRIThreesome02")
EndEvent

Event TRIThreesomeAfter02(string eventName, string argString, float argNum, form sender)
	(BaboEventRieklingThirsk as BaboEventRiekling).RieklingThreeAfterSex()
EndEvent

Event TRINewChiefRapeAfter(string eventName, string argString, float argNum, form sender)
	(BaboEventRieklingThirsk as BaboEventRiekling).AfterNewChiefRape()
EndEvent


Quest Property BaboEventRieklingThirsk Auto

Event LoanSharkAfterSex01(string eventName, string argString, float argNum, form sender)
	(BaboLoanSharks as BaboLoanSharkScript).LSAS01()
;	UnregisterForModEvent("AnimationEnd_LSAS01")
EndEvent

Event LoanSharkAfterSex02(string eventName, string argString, float argNum, form sender)
	(BaboLoanSharks as BaboLoanSharkScript).LSAS02()
;	UnregisterForModEvent("AnimationEnd_LSAS02")
EndEvent

Event BadEndAfterSex01(string eventName, string argString, float argNum, form sender)
	(BaboBadEnd as BaboBadEndQuest).BEAS01()
;	UnregisterForModEvent("AnimationEnd_BEAS01")
EndEvent

Event WindhelmNewgnisisAfterSex01(string eventName, string argString, float argNum, form sender)
	Actor Victim = SexLab.HookActors(argString)[0]
	Actor Raper01 = SexLab.HookActors(argString)[1]
	actor[] sexActors = new actor[2]
	sexActors[0] = Victim
	sexActors[1] = Raper01
	sslBaseAnimation[] anims
	anims = SexLab.GetAnimationsByTag(2, "Necro", "Aggressive", "Vaginal" ,  TagSuppress = "Femdom")
	RegisterForModEvent("AnimationEnd_WNAS01B", "WindhelmNewgnisisAfterSex01B")
	SexLab.StartSex(sexActors, anims, victim=sexActors[0], hook="WNAS01B")
;	UnregisterForModEvent("AnimationEnd_WNAS01")
EndEvent

Event WindhelmNewgnisisAfterSex01B(string eventName, string argString, float argNum, form sender)
	(BaboEventWindhelmNewgnisis as BaboEventNewgnisisMasterScript).WNAS01()
;	UnregisterForModEvent("AnimationEnd_WNAS01B")
EndEvent

Event WindhelmNewgnisisAfterSex02(string eventName, string argString, float argNum, form sender)
	(BaboEventWindhelmNewgnisis as BaboEventNewgnisisMasterScript).WNAS02()
;	UnregisterForModEvent("AnimationEnd_WNAS02")
EndEvent

Event WhiterunOrcVisitorsAfterSexBigGuy01(string eventName, string argString, float argNum, form sender)
	(BaboEventWhiterunOrcVisitiors as BaboEventWhiterunOrcVisitorsScript).WOASBigGuy01()
EndEvent

Event WhiterunOrcVisitorsAfterSexBigGuy02(string eventName, string argString, float argNum, form sender)
	(BaboEventWhiterunOrcVisitiors as BaboEventWhiterunOrcVisitorsScript).WOASBigGuy02()
EndEvent

Event WhiterunOrcVisitorsAfterSexBigGuy03(string eventName, string argString, float argNum, form sender)
	(BaboEventWhiterunOrcVisitiors as BaboEventWhiterunOrcVisitorsScript).WOASBigGuy03()
EndEvent

Event WhiterunOrcVisitorsAfterSex01(string eventName, string argString, float argNum, form sender)
	(BaboEventWhiterunOrcVisitiors as BaboEventWhiterunOrcVisitorsScript).WOAS01()
;	UnregisterForModEvent("AnimationEnd_WOAS01")
EndEvent

Event WhiterunOrcVisitorsAfterSex02(string eventName, string argString, float argNum, form sender)
	(BaboEventWhiterunOrcVisitiors as BaboEventWhiterunOrcVisitorsScript).WOAS02()
;	UnregisterForModEvent("AnimationEnd_WOAS02")
EndEvent

Event WhiterunViceCaptainAfterSex01(string eventName, string argString, float argNum, form sender)
	(BaboDialogueWhiterun as BaboDialogueWhiterunScript).WVAS01()
;	UnregisterForModEvent("AnimationEnd_WVAS01")
EndEvent

Event KidnapEvent01A(string eventName, string argString, float argNum, form sender)
	;BaboKidnapEvent.setstage(35)
	BaboKidnapEventDrunkPlayerScene03.forcestart()
	Utility.wait(1.0)
	Debug.sendanimationevent(PlayerRef, "BaboExhaustedFront01")
EndEvent

Event KidnapEvent01B(string eventName, string argString, float argNum, form sender)
	BaboKidnapEventDrunkPlayerScene04.forcestart()
	Utility.wait(1.0)
	Debug.sendanimationevent(PlayerRef, "BaboExhaustedFront02")
EndEvent

Event KidnapEvent01C(string eventName, string argString, float argNum, form sender)
	BaboKidnapEvent.setstage(55)
	Utility.wait(2.0)
	StuckControl()
	Debug.sendanimationevent(PlayerRef, "BaboExhaustedFront03")
EndEvent

Event KidnapEvent04(string eventName, string argString, float argNum, form sender)
	CorruptionExp(1.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).StartUptheEvent(4)
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).Nocollision(None)
	;Game.DisablePlayerControls( true, true, false, false, true, false, true, false )
	Debug.sendanimationevent(PlayerRef, "BaboWombHit")
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).YouGotSpotted(1)
	(BaboKidnapEvent as BaboKidnapEvenScript).KidnapperMovetoPoint(2)
EndEvent

Event KidnapEvent04A(string eventName, string argString, float argNum, form sender)
	CorruptionExp(1.0)
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).Nocollision(None)
	;Game.DisablePlayerControls( true, true, false, false, true, false, true, false )
	Debug.sendanimationevent(PlayerRef, "BaboExhaustedFront01")
	Utility.wait(2.0)
	BaboKidnapEventScenarioLastSex.forcestart()
EndEvent

Event KidnapEvent04B(string eventName, string argString, float argNum, form sender)
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).Nocollision(None)
	;Game.DisablePlayerControls( true, true, false, false, true, false, true, false )
	(BaboKidnapEvent as BaboKidnapEvenScript).YouGotSpotted(1)
	KidnapEvent01Messagebox(10)
EndEvent

Event KidnapEvent04C(string eventName, string argString, float argNum, form sender)
	CorruptionExp(1.0)
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).Nocollision(None)
	;Game.DisablePlayerControls( true, true, false, false, true, false, true, false )
	Debug.sendanimationevent(PlayerRef, "BaboExhaustedFront01")
	Utility.wait(2.0)
	BaboKidnapEventScenario04AfterSex.forcestart()
EndEvent

Event KidnapEvent06A(string eventName, string argString, float argNum, form sender)
	CorruptionExp(1.0)
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).Nocollision(None)
	;Game.DisablePlayerControls( true, true, false, false, true, false, true, false )
	Debug.sendanimationevent(PlayerRef, "BaboExhaustedFront01")
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).YouGotSpotted(1)
EndEvent

Event KidnapEvent06B(string eventName, string argString, float argNum, form sender)
	CorruptionExp(1.0)
	Utility.wait(2.0)
	LosingControl()
	;(BaboKidnapEvent as BaboKidnapEvenScript).AfterKidnapEvent(2)
	(BaboKidnapEvent as BaboKidnapEvenScript).StartUptheEvent(1)
	(BaboKidnapEvent as BaboKidnapEvenScript).YouGotSpotted(1)
EndEvent

Event KidnapEvent06C(string eventName, string argString, float argNum, form sender)
	LewdnessExp(6.0)
	CorruptionExp(8.0)
	TraumaExp(2.0)
	AddSexCount(6)
	AddGroupSexCount(3)
	Debug.sendanimationevent(PlayerRef, "BaboExhaustedFront01")
	Utility.wait(1.0)
	BaboKidnapEventYouAreTrappedSnareRopeIMCAfterSex.forcestart()
EndEvent

Event KidnapEvent06D(string eventName, string argString, float argNum, form sender)
	Debug.sendanimationevent(PlayerRef, "BaboExhaustedFront01")
	Utility.wait(1.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).YouGotSpotted(0);You are going to be hanged
EndEvent

Event KidnapEvent06F(string eventName, string argString, float argNum, form sender)
	CorruptionExp(1.0)
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).Nocollision(None)
	;Game.DisablePlayerControls( true, true, false, false, true, false, true, false )
	Debug.sendanimationevent(PlayerRef, "Babo_DeathStart")
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).YouGotSpotted(0)
EndEvent

Event BaboKidnapPunishment06A(string eventName, string argString, float argNum, form sender);PunishmentSex
	CorruptionExp(1.0)
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).Nocollision(None)
	;Game.DisablePlayerControls( true, true, false, false, true, false, true, false )
	Debug.sendanimationevent(PlayerRef, "BaboExhaustedFront01")
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).YouGotSpotted(0)
EndEvent

Event KidnapEvent10A(string eventName, string argString, float argNum, form sender)
	CorruptionExp(1.0)
	AddGroupSexCount(2)
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).Nocollision(None)
	RandomExhaustionIdle(PlayerRef)
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).YouGotSpotted(1)
EndEvent

Event KidnapEvent10B(string eventName, string argString, float argNum, form sender);Snuck in in the middle of night
	CorruptionExp(1.0)
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).Nocollision(None)
	RandomExhaustionIdle(PlayerRef)
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).YouGotSpotted(1)
EndEvent

Event KidnapEvent20A(string eventName, string argString, float argNum, form sender)
	CorruptionExp(2.0)
	Utility.wait(2.0)
	LosingControl()
	Debug.sendanimationevent(PlayerRef, "BaboFaintFStart")
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).BaboKidnapScenePlay(3)
EndEvent

Event KidnapEvent20B(string eventName, string argString, float argNum, form sender)
	CorruptionExp(1.0)
	Utility.wait(2.0)
	LosingControl()
	RandomExhaustionIdle(PlayerRef)
	Utility.wait(2.0)
	;(BaboKidnapEvent as BaboKidnapEvenScript).AfterKidnapEvent(2)
	(BaboKidnapEvent as BaboKidnapEvenScript).BaboKidnapScenePlay(6)
EndEvent

Event KidnapEvent20C(string eventName, string argString, float argNum, form sender);Guard Sex
	CorruptionExp(1.0)
	Utility.wait(2.0)
	LosingControl()
	RandomExhaustionIdle(PlayerRef)
	Utility.wait(2.0)
	(BaboKidnapEvent as BaboKidnapEvenScript).BaboKidnapScenePlay(7)
EndEvent

Event KidnapEvent20D(string eventName, string argString, float argNum, form sender);Guard Sex
	CorruptionExp(1.0)
	Utility.wait(2.0)
	LosingControl()
	(BaboKidnapEvent as BaboKidnapEvenScript).BaboKidnapScenePlay(8)
EndEvent

Event AnimalCareEventAfterSex(string eventName, string argString, float argNum, form sender)
	;CorruptionExp(2.0)
	BaboSpectatorWOEnemyScript.stop()
	BaboEventAnimalCare.setstage(70)
EndEvent

Event AnimalCareEventMarkarthStage08Sex(string eventName, string argString, float argNum, form sender)
	;ReputationBitchCreature(1)
	BEventAnimalCareMarkarthScenePlay(6)
	Actor Actor01 = SexLab.HookActors(argString)[0]
	Actor Actor02 = SexLab.HookActors(argString)[1]
	SexCustomActor(Actor01, Actor02, None, None, None, "Aggressive", "CF", "Vagina", True, "Babo_AnimalCareEventMarkarthStage08SexB", "AnimalCareEventMarkarthStage08SexB", true)
EndEvent

Event AnimalCareEventMarkarthStage08SexB(string eventName, string argString, float argNum, form sender)
	;ReputationBitchCreature(1)
	BaboEventAnimalCareMarkarth.setstage(10)
EndEvent

Event AnimalCareEventMarkarthStage30Sex(string eventName, string argString, float argNum, form sender)
	BaboEventAnimalCareMarkarth.setstage(34)
EndEvent

Event AnimalCareEventMarkarthAfterSex(string eventName, string argString, float argNum, form sender)
	;CorruptionExp(2.0)
	BaboSpectatorWOEnemyScript.stop()
	BaboEventAnimalCareMarkarthScene02.stop()
	BaboEventAnimalCareMarkarth.setstage(55)
EndEvent

Function CustomMFGPain(actor akactor, int iindex, bool bmouth = true, bool bgag = false)
	if iindex == 0
		(BaboMonitorScript as BaboDiaMonitorScript).Backtoinitial(akactor)
	else
		(BaboMonitorScript as BaboDiaMonitorScript).PainMenu(akactor, iindex, bmouth, bgag)
	endif
EndFunction

Function CustomMFGAhe(actor akactor, int iindex, bool bmouth = true, bool bgag = false)
	if iindex == 0
		(BaboMonitorScript as BaboDiaMonitorScript).Backtoinitial(akactor)
	else
		(BaboMonitorScript as BaboDiaMonitorScript).AheMenu(akactor, iindex, bmouth, bgag)
	endif
EndFunction

Function MFGGag(actor akactor, int iindex)
	(BaboMonitorScript as BaboDiaMonitorScript).GagPhoneme(akactor, iindex)
EndFunction

Function BountyReward(int CrimeCase)
if CrimeCase == 1;Serial Killer
	PlayerRef.additem(Gold001, 700)
	PlayerRef.Removeitem(BaboBountyRingSerialKiller, 1)
	ReputationIncrease(10, 20)
endif
EndFunction

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;\\\\\\\\\\\\\\\\\ Compatibility \\\\\\\\\\\\\\\\\\\\\
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

Function excludeActorAggr(Form toExclude)
if BaboYamete.getvalue() == 1
	JsonUtil.FormListAdd("../Yamete/excluded.json", "actorsAggr", toExclude, false)
	;Debug.Notification((toExclude as Actor).GetLeveledActorBase().GetName() + " is no longer allowed to knock down.")
endif
EndFunction

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;\\\\\\\\\\\\\\\\\ BDM Property \\\\\\\\\\\\\\\\\\\\\
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

Function ConfidenceExp(Float Mult)
	BDMScript.CalcConfidenceExpGain(Mult)
EndFunction

Function CorruptionExpLoss(Float Mult);Deprecated, Use CorruptionExp instead
	BDMScript.CalcCorruptionExpLoss(Mult)
EndFunction

Function CorruptionExp(Float Mult)
	BDMScript.CalcCorruptionExpGain(Mult)
EndFunction

Function TraumaExp(Float Mult)
	BDMScript.CalcTraumaExpGain(Mult)
EndFunction

Function TraumaExpLoss(Float Mult);Deprecated, Use TraumaExp instead
	BDMScript.CalcTraumaExpLoss(Mult)
EndFunction

Function LewdnessExp(Float Mult)
	BDMScript.CalcLewdnessExpGain(Mult)
EndFunction

Function LewdnessExpLoss(Float Mult);Deprecated, Use LewdnessExp instead
	BDMScript.CalcLewdnessExpLoss(Mult)
EndFunction

Function CreatureTraumaExp(Float Mult)
	BDMScript.CalcCreatureTraumaExpGain(Mult)
EndFunction

Function CreatureTraumaExpLoss(Float Mult);Deprecated, Use CreatureTraumaExp instead
	BDMScript.CalcCreatureTraumaExpLoss(Mult)
EndFunction

Function ReputationBitchCreature(int RB)
	(BaboReputationScript as BaboReputationMasterScript).CreatureSexReputation(RB)
EndFunction

Function ReputationRieklingThirskIncrease(int RB)
	(BaboReputationScript as BaboReputationMasterScript).IncreaseReputationRieklingThirsk(RB)
EndFunction

Function ReputationBitchIncrease(int RB)
	(BaboReputationScript as BaboReputationMasterScript).IncreaseReputationBitch(RB)
EndFunction

Function ReputationBitchDecrease(int RB)
	(BaboReputationScript as BaboReputationMasterScript).DecreaseReputationBitch(RB)
EndFunction

Function ReputationBitchRatioModify(float ratio)
	(BaboReputationScript as BaboReputationMasterScript).ModifyReputationBitchRatio(ratio)
EndFunction

Function ReputationIncrease(int RP, int FavorRP)
	(BaboReputationScript as BaboReputationMasterScript).IncreaseReputation(RP, FavorRP)
EndFunction

Function ReputationDecrease(int RP, int FavorRP)
	(BaboReputationScript as BaboReputationMasterScript).DecreaseReputation(RP, FavorRP)
EndFunction

Function ReputationRatioModify(float ratio)
	(BaboReputationScript as BaboReputationMasterScript).ModifyReputationRatio(ratio)
EndFunction


Function AddSexCount(int Count)
	(BaboReputationScript as BaboReputationMasterScript).SexCount(Count)
EndFunction

Function AddGroupSexCount(int Count)
	(BaboReputationScript as BaboReputationMasterScript).SexCountgangbang(Count)
EndFunction

Function StruggleBarDisplay(Bool Display = True)
EndFunction

Function ResistSuccess(actor akactor)
EndFunction

Function ResistFailed(actor akactor)
EndFunction

Function Restore()
EndFunction

Function PlusRescueCount(int num)
	(BaboRescuingSlavesScript as BaboSlaveRescueScript).PlusRescueCount(num)
EndFunction

Function MinusRescueCount(int num)
	(BaboRescuingSlavesScript as BaboSlaveRescueScript).MinusRescueCount(num)
EndFunction

Function SetSLAArousal(Actor akactor, int slaarousal)
	(sla_Framework as slaFrameworkScr).SetActorExposure(akactor, slaarousal);
EndFunction

Bool Function SetRandomCharacterRank(Actor akactor)
int ichance = Utility.randomint(0, 100)
int icharacter
if !akactor.isinfaction(SLAX_AggressiveFaction)
	if ichance < 25
		icharacter = 0
	elseif ichance < 50
		icharacter = 1
	elseif ichance < 85
		icharacter = 2
	else
		icharacter = 3
	endif
	SetChracterRank(akactor, icharacter)
	return true
else
	return false
endif
EndFunction

Function SetBehaviorPattern(Actor akactor, int rank)
int randomi = Utility.randomint(0, rank)
	akactor.addtofaction(BaboBehaviorPatternFaction)
	akactor.setfactionrank(BaboBehaviorPatternFaction, randomi)
EndFunction

Function SetChracterRank(Actor akactor, int rank)
	akactor.addtofaction(SLAX_AggressiveFaction)
	akactor.setfactionrank(SLAX_AggressiveFaction, rank)
EndFunction

Bool Function IsactorRapist(Actor akactor, int diminishchance, bool bcriminal)
if (akactor.isinfaction(SLAX_RapistFaction))
	return true
else
	;RollRapeChance(akRef, diminishchance)
	if DefineRapist(akactor, RollRapeChance(akactor, diminishchance), 300, true)
		if bcriminal
			akactor.addtofaction(BaboWEAggressiveRapistFaction)
		endif
		return true
	else
		return false
	endif
endif
EndFunction

int Function RollRapeChance(Actor akRef, int diminishchance)
		int chance = 0
		int CharacterRank = 0
		int ArousalRank = akRef.GetFactionRank(sla_Arousal)
		SetRandomCharacterRank(akRef)
		if akRef.isinfaction(SLAX_AggressiveFaction)
			CharacterRank = akRef.getfactionrank(SLAX_AggressiveFaction) as int
		endif
		
		chance += TimeCalc();from-25~25
		chance += NudeCalc(PlayerRef);from-30~70
		chance += AppearanceCalc();from0~100
		chance += ArousalRank
		chance += CharacterRank * 5
		chance += BaboReputationBitch.getvalue() as int
		chance -= BaboReputation.getvalue() as int
		chance -= diminishchance
		BaboRapeChanceGlobal.setvalue(chance)
		Return chance
EndFunction

Bool Function DefineRapistCriminal(Actor akactor, int chance, int maxchance, bool givefaction)
int diceint = Utility.randomint(0, maxchance)
if diceint < chance
	if givefaction
		akactor.addtofaction(BaboWEAggressiveRapistFaction);against guard faction
		akactor.addtofaction(SLAX_RapistFaction)
	endif
	return true
else
	return false
endif

endfunction

Bool Function DefineRapist(Actor akactor, int chance, int maxchance, bool givefaction)
int diceint = Utility.randomint(0, maxchance)
if diceint < chance
	if givefaction
		akactor.addtofaction(BaboRapistFaction);Neutral, not against gurad faction
		akactor.addtofaction(SLAX_RapistFaction)
	endif
	return true
else
	return false
endif

endfunction

Function PurgeRapistFactions(Actor akactor)
	akactor.removefromfaction(BaboRapistFaction)
	akactor.removefromfaction(SLAX_RapistFaction)
EndFunction

int Function CalcPlayerAttractiveness()
int chance = 0
	chance += NudeCalc(PlayerRef);from-30~70
	chance += AppearanceCalc();from0~100
	
	return chance
EndFunction

Function PastTime(int itime)
	Float CurrentTime = GameHour.GetValue()
	CurrentTime += itime
	if CurrentTime > 24
		CurrentTime -= 24
	endif
	GameHour.SetValue(CurrentTime)
EndFunction

int Function TimeCalc(bool enableMinus = true)

	float hour = GameHour.GetValue()

	if(hour >= 22 || hour < 2)
		return 25
	elseif(hour >= 20 || hour < 4)
		return 20
	elseif(hour >= 18 || hour < 6)
		return 15
	elseif (hour > 8 && hour < 16)
		return -25
	endif
	
	return 0
EndFunction

int Function NudeCalc(Actor akRef)
	If akRef.WornHasKeyword(SLA_ArmorPretty)
		return 5
	ElseIf (akRef.WornHasKeyword(EroticArmor)) || (akRef.isequipped(sla_NakedArmorList))
		return 25
	ElseIf (akRef.WornHasKeyword(SLA_ArmorSpendex)) || (akRef.WornHasKeyword(SLA_ArmorLewdLeotard))
		return 35
	ElseIf (akRef.WornHasKeyword(SLA_ArmorHalfNakedBikini)) || (akRef.WornHasKeyword(SLA_ArmorCurtain))
		return 50
	ElseIf (akRef.WornHasKeyword(SLA_ArmorHalfNaked)) || (akRef.WornHasKeyword(SLA_ArmorTransparent))
		return 60
	elseif (!akRef.WornHasKeyword(ArmorCuirass) && !akRef.WornHasKeyword(ClothingBody))
		return 70
	else
		return -30
	endif
EndFunction

int Function AppearanceCalc()

float value = 0
float AppearanceValue = BaboPlayerAppearanceValue.getvalue()
float BreastsValue = BaboPlayerBreastsValue.getvalue()
float ButtsValue = BaboPlayerButtocksValue.getvalue()

Value = AppearanceValue + BreastsValue + ButtsValue
BaboPlayerAppearanceTotalValue.setvalue(Value)
Value = Value / 3
Return Value as int

EndFunction

Function ModifySexlabStats(Actor akactor, int femaleint = 0, int maleint = 1, int victimint = 1, int AnalNum = 0, int OralNum = 0, int VaginalNum = 1)
	(SexLabQuestFramework as sslActorStats).AdjustSkill(akactor, "Females", femaleint)
	(SexLabQuestFramework as sslActorStats).AdjustSkill(akactor, "Males", maleint)
	(SexLabQuestFramework as sslActorStats).AdjustSkill(akactor, "Victim", victimint)
	(SexLabQuestFramework as sslActorStats).AdjustSkill(akactor, "Anal", AnalNum)
	(SexLabQuestFramework as sslActorStats).AdjustSkill(akactor, "Vaginal", VaginalNum)
	(SexLabQuestFramework as sslActorStats).AdjustSkill(akactor, "Oral", OralNum)
EndFunction

Function QTESoloAnimation(Actor Victim, Bool Animate = True, String VictimAnim, Bool GainControl = false)
	If Animate
		;Victim.SetDontMove(True)
		Game.SetPlayerAIDriven(true)
		
		if Game.GetCameraState() == 0
			Game.ForceThirdPerson()
		endIf

		BaboSexControllerXmarker.MoveTo(Victim) ; PosRef
		Float AngleZ = Victim.GetAngleZ()
		Victim.SetVehicle(BaboSexControllerXmarker) ; PosRef
		
		If GainControl
			Debug.SendAnimationEvent(Victim, "IdleForceDefaultState")
		Endif
		
		Utility.wait(1.0)
		Debug.SendAnimationEvent(Victim, VictimAnim)
		isplaying = True
	Else
		if GainControl
			Victim.SetVehicle(None)
			Game.EnablePlayerControls()
			Game.SetPlayerAIDriven(false)
			;Victim.SetRestrained(False)
			;Victim.SetDontMove(False)
		endif
		Debug.SendAnimationEvent(Victim, VictimAnim)
		isplaying = false
	Endif
EndFunction


Function QTEAnimation(Actor Victim, Actor Aggressor, Bool Animate = True, String VictimAnim, String AggressorAnim, Bool GainControl = false)
	If Animate
		PrecisionCheck(Aggressor, true)
		PrecisionCheck(Victim, true)
		ActorUtil.AddPackageOverride(Aggressor, BaboDoNothing, 100, 1)
		Aggressor.EvaluatePackage()
		Aggressor.SetRestrained(True)
		Aggressor.SetDontMove(True)
		Victim.SetDontMove(True)
		Game.SetPlayerAIDriven(true)
		
		if Game.GetCameraState() == 0
			Game.ForceThirdPerson()
		endIf

		BaboSexControllerXmarker.MoveTo(Aggressor) ; PosRef
		Float AngleZ = Victim.GetAngleZ()
		Aggressor.MoveTo(Victim, 0.0 * Math.Sin(AngleZ), 0.0 * Math.Cos(AngleZ))
		Victim.SetVehicle(BaboSexControllerXmarker) ; PosRef
		Aggressor.SetVehicle(BaboSexControllerXmarker) ; PosRef
		
		If GainControl
			Debug.SendAnimationEvent(Aggressor, "IdleForceDefaultState")
			Debug.SendAnimationEvent(Victim, "IdleForceDefaultState")
		Endif
		
		Utility.wait(1.0)
		Aggressor.MoveTo(Victim, 0.0 * Math.Sin(AngleZ), 0.0 * Math.Cos(AngleZ))
		Debug.SendAnimationEvent(Victim, VictimAnim)
		Debug.SendAnimationEvent(Aggressor, AggressorAnim)
		isplaying = True
	Else
		Aggressor.SetVehicle(None)
		if GainControl
			Victim.SetVehicle(None)
			Game.EnablePlayerControls()
			Game.SetPlayerAIDriven(false)
			Victim.SetRestrained(False)
			Victim.SetDontMove(False)
		endif
		Aggressor.SetRestrained(False)
		Aggressor.SetDontMove(False)
		ActorUtil.RemovePackageOverride(Aggressor, BaboDoNothing)

		Debug.SendAnimationEvent(Aggressor, AggressorAnim)
		Debug.SendAnimationEvent(Victim, VictimAnim)
		isplaying = false
		PrecisionCheck(Aggressor, False)
		PrecisionCheck(Victim, False)
	Endif
EndFunction

Function EjaculationSound(ObjectReference akSource, int Sort)
	if Sort == 1
		BaboEjaculationInnerMarker.play(akSource)
	elseif Sort == 2
		BaboEjaculationOuterMarker.play(akSource)
	endif
EndFunction

Function MiscSound(ObjectReference akSource, int Sort)
	if Sort == 1
		BaboPunchMarker.play(akSource)
	elseif Sort == 2
		BaboRopeRustleSoundMarker.play(akSource)
	elseif Sort == 3
		BaboDoorKnobMarker.play(akSource);Door Knob
	endif
EndFunction

Function UseSexlabVoice(actor ActorRef, bool isvictim)
	SexLab.PickVoice(ActorRef).Moan(ActorRef, 1, isvictim)
EndFunction

Function HangingActor(actor Akactor, objectreference Rope, Bool Autoplay, Bool Lethal)
	(BaboHangingQuest as BaboHangingControlScript).GallowStateStage(0)
	(BaboHangingQuest as BaboHangingControlScript).VerifyActor(Akactor)
	(BaboHangingQuest as BaboHangingControlScript).VerifyRope(Rope)
	(BaboHangingQuest as BaboHangingControlScript).VerifyAutoplay(Autoplay)
	(BaboHangingQuest as BaboHangingControlScript).VerifyLethal(Lethal)
	(BaboHangingQuest as BaboHangingControlScript).Initialize()
EndFunction

Function HangingStateChange(int Changeint)
	(BaboHangingQuest as BaboHangingControlScript).GallowStateStage(Changeint)
EndFunction

Function ShowHelpMessage()
	If (BDMCM.BaboResistType == "$Attack")
		BaboQTEAtkMess.ShowAsHelpMessage("", 2, 1, 1)
	Else
		BaboQTEStrafeMess.ShowAsHelpMessage("", 2, 1, 1)
	Endif
EndFunction

int Function GetActorValueCustom(actor akactor, String AVList)
int AVint
	AVint = akactor.getactorvalue(AVList) as int
return AVint
EndFunction

Bool Function CustomResistChance(actor akactor, int MinChance, int MaxChance, string avi)

int randomi = Utility.randomint(MinChance, MaxChance)
int PRChance = GetActorValueCustom(akactor, avi) as int

if randomi <= PRChance
	return true
else
	return false
endif

EndFunction

Bool Function PoisonResistChance(actor akactor, int MinChance, int MaxChance)

int randomi = Utility.randomint(MinChance, MaxChance)
int PRChance = GetActorValueCustom(akactor, "PoisonResist") as int

if randomi <= PRChance
	return true
else
	return false
endif

EndFunction

Bool Function DiseaseResistChance(actor akactor, int MinChance, int MaxChance)

int randomi = Utility.randomint(MinChance, MaxChance)
int PRChance = GetActorValueCustom(akactor, "DiseaseResist") as int

if randomi <= PRChance
	return true
else
	return false
endif

EndFunction


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ Utils \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

Function DeleteWhenAbleWithTimeout(Actor[] actors, float afSeconds = 30.0)
	if actors == None
		return
	endIf
	Int i = 0
	bool wait = false
	While afSeconds > 0
		i = 0
		wait = false
		While (i < actors.Length)
			If actors[i]
				If actors[i].GetParentCell() && actors[i].GetParentCell().IsAttached()
					wait = true
				Else
					debug.trace(self + " DeleteWhenAbleWithTimeout " + actors[i] + " in un attached cell - delete")
					actors[i].Delete()
					actors[i] = None
				Endif
			Endif
			i += 1
		EndWhile
		If wait
			Utility.Wait(5)
			afSeconds -= 5
		Else
			return
		EndIf
	EndWhile

	i = 0
	While (i < actors.Length)
		If actors[i]
			debug.trace(self + " DeleteWhenAbleWithTimeout " + actors[i] + " is timeouted - delete")
			actors[i].Delete()
		Endif
		i += 1
	EndWhile
EndFunction

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;\\\\\\\\\\\\\\\\\\\\\\\ State \\\\\\\\\\\\\\\\\\\\\
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
Quest Property BaboWidgetController auto
Faction Property SLAX_RapistFaction Auto

Bool isplaying = false
Bool LeftRight = True
Int StrafeL
Int StrafeR
Float FillDifficulty = 0.0
Float FillThreshold = 0.0
Float PresetFillThreshold = 0.0
Int ResistTime = 0
int Time = 0
int SoundTime = 0
Float DownedTime ; How much time the player will stay downed.

Actor Property StruggleActor auto
ObjectReference Property BaboSexControllerXmarker Auto
GlobalVariable Property BaboChangeLocation07Variable Auto
GlobalVariable Property BaboAssaultAttemptCountInstance Auto
String DamagevalueString
String DamagevalueString02
Bool bQTETextAbort

Function StateChange(String StateString)
	GotoState(StateString)
EndFunction

Function QTETextAbort()
	bQTETextAbort = true
	BaboWidgetTextController.stop()
	(BaboWidgetTextController as BaboQTETextWidgetEx).turnoff()
	(BaboKidnapEvent as BaboKidnapEvenScript).QTESnareTrapFail()
EndFunction

Function QTETextStart()
	bQTETextAbort = false
	if BaboWidgetTextController == None
		return
	endif
	Bool IsSuccess = StartQTEText(BDMCM.BaboQTELimitTime, BDMCM.BaboQTEDifficulty)
	if bQTETextAbort
		return
	endif
	if IsSuccess
		BaboWidgetTextController.stop()
		(BaboWidgetTextController as BaboQTETextWidgetEx).turnoff()
	else
		BaboWidgetTextController.stop()
		(BaboWidgetTextController as BaboQTETextWidgetEx).turnoff()
	endif
EndFunction

bool Function StartQTEText(float limitTime, float fdifficulty)
	if BaboWidgetTextController == None
		return false
	endif
	string msg = JsonUtil.getstringvalue(file, "baboqtetextfire")
	(BaboWidgetTextController as BaboQTETextWidgetEx).start()
	Utility.Wait(0.5)
	(BaboWidgetTextController as BaboQTETextWidgetEx).SetParameter(msg, fdifficulty)
	(BaboWidgetTextController as BaboQTETextWidgetEx).UpdateWidgetsAsync()
	float qteStartTime = Utility.GetCurrentRealTime()
	float qteElapsed = 0.0
	while (qteElapsed < limitTime && !(BaboWidgetTextController as BaboQTETextWidgetEx).IsSuccess)
		qteElapsed = Utility.GetCurrentRealTime() - qteStartTime
		Utility.Wait(0.01)
	endWhile
	bool ret = (BaboWidgetTextController as BaboQTETextWidgetEx).IsSuccess
	return ret
EndFunction

Function DefineStruggleActor(referencealias Aggressor)
	StruggleActor = Aggressor.getreference() as actor
EndFunction

Function ChangeLocationEvent07StateBegin(referencealias Aggressor)
	StruggleActor = Aggressor.getreference() as actor
	GotoState("BaboCLEvent07Sub01")
EndFunction

Function ChangeLocationEvent07ScenarioStart()
	BaboChangeLocation07Variable.setvalue(0)
	BaboAssaultAttemptCountInstance.setvalue(0)
EndFunction

Function SturggleDifficulty(float difficulty, String DamageValue = "", String DamageValue02 = "")
	PresetFillThreshold = difficulty
	DamagevalueString = DamageValue
	DamagevalueString02 = DamageValue02
	;Debug.notification(PresetFillThreshold + " Chance")
EndFunction

Event OnKeyDown(Int KeyCode)
EndEvent

State BaboCLEvent07Sub01

	Event OnBeginState()
		BaboAssaultAttemptCountInstance.setvalue(BaboAssaultAttemptCountInstance.getvalue() + 1)
		if StruggleActor
			QTEAnimation(PlayerRef, StruggleActor, true, "Babo_DrunkMF_A1_S1", "Babo_DrunkMF_A2_S1", false)
		endif
		Game.EnablePlayerControls(1, 0, 0, 0, 0, 0, 0, 0);To display HUD
		
		utility.wait(1.5)
		DownedTime = 20.0
		FillThreshold = 0.01
		StruggleBarDisplay(true)
		RegisterForSingleUpdate(1.0)
	EndEvent
	
	Event OnUpdate() ; Loop to check the situation every 1 second.
		Time += 1
		If (BaboWidgetController as BaboQTEWidgetEx).Percent >= 1.0
			ResistSuccess(StruggleActor)
			Return
		Elseif Time > DownedTime
			ResistFailed(StruggleActor)
			Return
		Endif
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 100.0
	RegisterForSingleUpdate(1.0)
	EndEvent

Function ResistSuccess(actor akactor)
	QTEAnimation(PlayerRef, StruggleActor, false, "IdleForceDefaultState", "IdleForceDefaultState", true)
	if BaboAssaultAttemptCountInstance.getvalue() == 1
		BaboChangeLocationEvent07.setstage(32)
	elseif BaboAssaultAttemptCountInstance.getvalue() >= 2
		BCLEvent07ScenePlay(5)
	endif
	Restore()
EndFunction

Function ResistFailed(actor akactor)
	if BaboAssaultAttemptCountInstance.getvalue() == 1
		QTEAnimation(PlayerRef, StruggleActor, false, "BaboFaintFStart", "IdleForceDefaultState", false)
		BaboChangeLocationEvent07.setstage(60)
	elseif BaboAssaultAttemptCountInstance.getvalue() >= 2
		QTEAnimation(PlayerRef, StruggleActor, false, "Babo_DeathStart", "IdleForceDefaultState", false)
		ChangeLocationEvent07Messagebox(6)
		BCLEvent07ScenePlay(6)
	endif
	Restore()
EndFunction

Event OnKeyDown(Int KeyCode)
	If ((KeyCode == StrafeL) && LeftRight)
		LeftRight = False
		FillDifficulty += FillThreshold
		(BaboWidgetController as BaboQTEWidgetEx).Percent = (FillDifficulty)
	Elseif ((KeyCode == StrafeR) && !LeftRight)
		LeftRight = True
		FillDifficulty += FillThreshold
		(BaboWidgetController as BaboQTEWidgetEx).Percent = (FillDifficulty)
	Endif
EndEvent

Function StruggleBarDisplay(Bool Display = True)
If Display
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 100.0
	if Game.UsingGamepad()
		StrafeL = 0x10C;Left
		StrafeR = 0x10D;Right
	else
		If (BDMCM.BaboResistType == "$Attack")
			StrafeL = Input.GetMappedKey("Left Attack/Block")
			StrafeR = Input.GetMappedKey("Right Attack/Block")
		Else
			StrafeL = Input.GetMappedKey("Strafe Left")
			StrafeR = Input.GetMappedKey("Strafe Right")
		Endif
	endif
	RegisterForKey(StrafeL)
	RegisterForKey(StrafeR)
Else
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 0.0
	(BaboWidgetController as BaboQTEWidgetEx).Percent = 0.0
	FillDifficulty = 0.0
	UnregisterForKey(StrafeL)
	UnregisterForKey(StrafeR)
EndIf

EndFunction

Function Restore()
	SoundTime = 0
	Time = 0
	StruggleBarDisplay(False)
	GotoState("")
EndFunction

EndState

State BaboEventAnimalCareMarkarthState

	Event OnBeginState()
		;BaboAssaultAttemptCountInstance.setvalue(BaboAssaultAttemptCountInstance.getvalue() + 1)
		if StruggleActor
			PairedMotionCreature(StruggleActor, playerref, 3, "canine", true, true)
		endif
		utility.wait(1.5)
		DownedTime = 20.0
		FillThreshold = 0.01
		StruggleBarDisplay(true)
		RegisterForSingleUpdate(1.0)
	EndEvent
	
	Event OnUpdate() ; Loop to check the situation every 1 second.
		Time += 1
		If (BaboWidgetController as BaboQTEWidgetEx).Percent >= 1.0
			ResistSuccess(StruggleActor)
			Return
		Elseif Time > DownedTime
			ResistFailed(StruggleActor)
			Return
		Endif
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 100.0
	RegisterForSingleUpdate(1.0)
	EndEvent

Function ResistSuccess(actor akactor)
	CreaturePairedAnimSequence(StruggleActor, playerref, 3, "canine", "MountCanineFlankEscape", "BaboMountCanineFlankEscape")
	BaboEventAnimalCareMarkarth.setstage(7)
	BEventAnimalCareMarkarthScenePlay(4)
	Restore()
EndFunction

Function ResistFailed(actor akactor)
	CreaturePairedAnimSequence(StruggleActor, playerref, 3, "canine", "MountCanineFlankFail", "BaboMountCanineFlankFail")
	BaboEventAnimalCareMarkarth.setstage(8)
	BEventAnimalCareMarkarthScenePlay(3)
	Restore()
EndFunction

Event OnKeyDown(Int KeyCode)
	If ((KeyCode == StrafeL) && LeftRight)
		LeftRight = False
		FillDifficulty += FillThreshold
		(BaboWidgetController as BaboQTEWidgetEx).Percent = (FillDifficulty)
	Elseif ((KeyCode == StrafeR) && !LeftRight)
		LeftRight = True
		FillDifficulty += FillThreshold
		(BaboWidgetController as BaboQTEWidgetEx).Percent = (FillDifficulty)
	Endif
EndEvent

Function StruggleBarDisplay(Bool Display = True)
If Display
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 100.0
	if Game.UsingGamepad()
		StrafeL = 0x10C;Left
		StrafeR = 0x10D;Right
	else
		If (BDMCM.BaboResistType == "$Attack")
			StrafeL = Input.GetMappedKey("Left Attack/Block")
			StrafeR = Input.GetMappedKey("Right Attack/Block")
		Else
			StrafeL = Input.GetMappedKey("Strafe Left")
			StrafeR = Input.GetMappedKey("Strafe Right")
		Endif
	endif
	RegisterForKey(StrafeL)
	RegisterForKey(StrafeR)
Else
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 0.0
	(BaboWidgetController as BaboQTEWidgetEx).Percent = 0.0
	FillDifficulty = 0.0
	UnregisterForKey(StrafeL)
	UnregisterForKey(StrafeR)
EndIf

EndFunction

Function Restore()
	SoundTime = 0
	Time = 0
	StruggleBarDisplay(False)
	GotoState("")
EndFunction

EndState

State BaboKidnapState

	Event OnBeginState()
		Game.EnablePlayerControls(1, 0, 0, 0, 0, 0, 0, 0);To display HUD
		QTESoloAnimation(PlayerRef, True, "BaboRopeSquirm", false)
		utility.wait(1.5)
		DownedTime = 20.0
		FillThreshold = PresetFillThreshold
		StruggleBarDisplay(true)
		RegisterForSingleUpdate(1.0)
		ShowHelpMessage()
	EndEvent
	
	Event OnUpdate() ; Loop to check the situation every 1 second.
		Time += 1
		If (BaboWidgetController as BaboQTEWidgetEx).Percent >= 1.0
			ResistSuccess(None)
			Return
		Elseif Time > DownedTime
			ResistFailed(None)
			Return
		Endif
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 100.0
	RegisterForSingleUpdate(1.0)
	EndEvent

Function ResistSuccess(actor akactor)
	QTESoloAnimation(PlayerRef, false, "BaboRopeFall", true)
	KidnapEvent01Messagebox(9)
	(BaboKidnapEvent as BaboKidnapEvenScript).CurrentlyCaptured(false)
	(BaboKidnapEvent as BaboKidnapEvenScript).OnLOSRegister()
	if !RecoverControl(false)
		(BaboKidnapEvent as BaboKidnapEvenScript).YesCollision(None, "")
	endif
	Restore()
EndFunction

Function ResistFailed(actor akactor)
	QTESoloAnimation(PlayerRef, True, "BaboRopeHit", false)
	(BaboKidnapEvent as BaboKidnapEvenScript).TimeLapse(true, true)
	KidnapEvent01Messagebox(8)
	Restore()
EndFunction

Event OnKeyDown(Int KeyCode)
	SoundTime += 1
	If ((KeyCode == StrafeL) && LeftRight) && (PlayerRef.GetActorValue(DamagevalueString) >= 1.0)
		LeftRight = False
		FillDifficulty += FillThreshold
		PlayerRef.DamageActorValue(DamagevalueString, 1.0)
		(BaboWidgetController as BaboQTEWidgetEx).Percent = (FillDifficulty)
	Elseif ((KeyCode == StrafeR) && !LeftRight) && (PlayerRef.GetActorValue(DamagevalueString) >= 1.0)
		LeftRight = True
		FillDifficulty += FillThreshold
		PlayerRef.DamageActorValue(DamagevalueString, 1.0)
		(BaboWidgetController as BaboQTEWidgetEx).Percent = (FillDifficulty)
	Endif
	
	if SoundTime == 3
		MiscSound(PlayerRef, 2)
	elseif SoundTime == 7
		UseSexlabVoice(PlayerRef, true)
		SoundTime = 0
	endif	
EndEvent

Function StruggleBarDisplay(Bool Display = True)
If Display
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 100.0
	if Game.UsingGamepad()
		StrafeL = 0x10C;Left
		StrafeR = 0x10D;Right
	else
		If (BDMCM.BaboResistType == "$Attack")
			StrafeL = Input.GetMappedKey("Left Attack/Block")
			StrafeR = Input.GetMappedKey("Right Attack/Block")
		Else
			StrafeL = Input.GetMappedKey("Strafe Left")
			StrafeR = Input.GetMappedKey("Strafe Right")
		Endif
	endif
	RegisterForKey(StrafeL)
	RegisterForKey(StrafeR)
Else
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 0.0
	(BaboWidgetController as BaboQTEWidgetEx).Percent = 0.0
	FillDifficulty = 0.0
	UnregisterForKey(StrafeL)
	UnregisterForKey(StrafeR)
EndIf
EndFunction

Function Restore()
	Time = 0
	SoundTime = 0
	StruggleBarDisplay(False)
	GotoState("")
EndFunction

EndState

State BaboKidnapQTETextState

	Event OnBeginState()
		QTETextStart()
	EndEvent

	Function QTETextStart()
		bQTETextAbort = false
		Bool IsSuccess = StartQTEText(BDMCM.BaboQTELimitTime, BDMCM.BaboQTEDifficulty)
		if bQTETextAbort
			return
		endif
		if IsSuccess
			BaboWidgetTextController.stop()
			(BaboWidgetTextController as BaboQTETextWidgetEx).turnoff()
			(BaboKidnapEvent as BaboKidnapEvenScript).QTESnareTrapSuccess()
			GotoState("")
		else
			BaboWidgetTextController.stop()
			(BaboWidgetTextController as BaboQTETextWidgetEx).turnoff()
			(BaboKidnapEvent as BaboKidnapEvenScript).QTESnareTrapFail()
			GotoState("")
		endif
	EndFunction

EndState

State BaboFrontHugState

	Event OnBeginState()
		Game.EnablePlayerControls(1, 0, 0, 0, 0, 0, 0, 0);To display HUD
		ActorUtil.AddPackageOverride(StruggleActor, BaboDoNothing, 100, 1)
		StruggleActor.EvaluatePackage()
		EventPairMotion(StruggleActor, 0, 0, 0, 7, false)
		utility.wait(1.5)
		DownedTime = 20.0
		FillThreshold = PresetFillThreshold
		StruggleBarDisplay(true)
		RegisterForSingleUpdate(1.0)
		ShowHelpMessage()
		StruggleActor.addtofaction(BaboDialogueHuggedFaction)
	EndEvent
	
	Event OnUpdate() ; Loop to check the situation every 1 second.
		Time += 1
		If (BaboWidgetController as BaboQTEWidgetEx).Percent >= 1.0
			ResistSuccess(StruggleActor)
			Return
		Elseif Time > DownedTime
			ResistFailed(StruggleActor)
			Return
		Endif
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 100.0
	RegisterForSingleUpdate(1.0)
	EndEvent

Function ResistSuccess(actor akactor)
	Self.EventPairMotion(akactor, 0, 0, 0, 0, true)
	Debug.sendanimationevent(PlayerRef, "IdleForceDefaultState")
	Restore()
EndFunction

Function ResistFailed(actor akactor)
	Self.EventPairMotion(akactor, 0, 0, 0, 0, true)
	Debug.sendanimationevent(PlayerRef, "IdleForceDefaultState")
	Restore()
EndFunction


Event OnKeyDown(Int KeyCode)
	SoundTime += 1
	If ((KeyCode == StrafeL) && LeftRight) && (PlayerRef.GetActorValue(DamagevalueString) >= 1.0)
		LeftRight = False
		FillDifficulty += FillThreshold
		PlayerRef.DamageActorValue(DamagevalueString, 1.0)
		(BaboWidgetController as BaboQTEWidgetEx).Percent = (FillDifficulty)
	Elseif ((KeyCode == StrafeR) && !LeftRight) && (PlayerRef.GetActorValue(DamagevalueString) >= 1.0)
		LeftRight = True
		FillDifficulty += FillThreshold
		PlayerRef.DamageActorValue(DamagevalueString, 1.0)
		(BaboWidgetController as BaboQTEWidgetEx).Percent = (FillDifficulty)
	Endif
	
EndEvent

Function StruggleBarDisplay(Bool Display = True)
If Display
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 100.0
	if Game.UsingGamepad()
		StrafeL = 0x10C;Left
		StrafeR = 0x10D;Right
	else
		If (BDMCM.BaboResistType == "$Attack")
			StrafeL = Input.GetMappedKey("Left Attack/Block")
			StrafeR = Input.GetMappedKey("Right Attack/Block")
		Else
			StrafeL = Input.GetMappedKey("Strafe Left")
			StrafeR = Input.GetMappedKey("Strafe Right")
		Endif
	endif
	RegisterForKey(StrafeL)
	RegisterForKey(StrafeR)
Else
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 0.0
	(BaboWidgetController as BaboQTEWidgetEx).Percent = 0.0
	FillDifficulty = 0.0
	UnregisterForKey(StrafeL)
	UnregisterForKey(StrafeR)
EndIf
EndFunction

Function Restore()
	Time = 0
	SoundTime = 0
	StruggleBarDisplay(False)
	if BaboChangeLocationEvent08.isrunning()
		if BaboChangeLocationEvent08.getstage() == 5
			BaboChangeLocationEvent08.setstage(6)
		elseif BaboChangeLocationEvent08.getstage() == 25
			BaboChangeLocationEvent08.setstage(27)
		endif
	endif
	GotoState("")
EndFunction

EndState

State BaboSimpleQTEState

	Event OnBeginState()
		Game.EnablePlayerControls(1, 0, 0, 0, 0, 0, 0, 0);To display HUD
		;You require to play paired animation separately.
		utility.wait(1.5)
		DownedTime = 20.0
		FillThreshold = PresetFillThreshold
		StruggleBarDisplay(true)
		RegisterForSingleUpdate(1.0)
		ShowHelpMessage()
	EndEvent
	
	Event OnUpdate() ; Loop to check the situation every 1 second.
		Time += 1
		If (BaboWidgetController as BaboQTEWidgetEx).Percent >= 1.0
			ResistSuccess(None)
			Return
		Elseif Time > DownedTime
			ResistFailed(None)
			Return
		Endif
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 100.0
	RegisterForSingleUpdate(1.0)
	EndEvent

Function ResistSuccess(actor akactor)
	Self.EventPairMotion(akactor, 0, 0, 0, 0, false)
	Debug.sendanimationevent(PlayerRef, "IdleForceDefaultState")
	Restore()
EndFunction

Function ResistFailed(actor akactor)
	Self.EventPairMotion(akactor, 0, 0, 0, 0, false)
	Debug.sendanimationevent(PlayerRef, "IdleForceDefaultState")
	Restore()
EndFunction

Event OnKeyDown(Int KeyCode)
	SoundTime += 1
	If ((KeyCode == StrafeL) && LeftRight) && (PlayerRef.GetActorValue(DamagevalueString) >= 1.0)
		LeftRight = False
		FillDifficulty += FillThreshold
		PlayerRef.DamageActorValue(DamagevalueString, 1.0)
		(BaboWidgetController as BaboQTEWidgetEx).Percent = (FillDifficulty)
	Elseif ((KeyCode == StrafeR) && !LeftRight) && (PlayerRef.GetActorValue(DamagevalueString) >= 1.0)
		LeftRight = True
		FillDifficulty += FillThreshold
		PlayerRef.DamageActorValue(DamagevalueString, 1.0)
		(BaboWidgetController as BaboQTEWidgetEx).Percent = (FillDifficulty)
	Endif
	
EndEvent

Function StruggleBarDisplay(Bool Display = True)
If Display
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 100.0
	if Game.UsingGamepad()
		StrafeL = 0x10C;Left
		StrafeR = 0x10D;Right
	else
		If (BDMCM.BaboResistType == "$Attack")
			StrafeL = Input.GetMappedKey("Left Attack/Block")
			StrafeR = Input.GetMappedKey("Right Attack/Block")
		Else
			StrafeL = Input.GetMappedKey("Strafe Left")
			StrafeR = Input.GetMappedKey("Strafe Right")
		Endif
	endif
	RegisterForKey(StrafeL)
	RegisterForKey(StrafeR)
Else
	(BaboWidgetController as BaboQTEWidgetEx).Alpha = 0.0
	(BaboWidgetController as BaboQTEWidgetEx).Percent = 0.0
	FillDifficulty = 0.0
	UnregisterForKey(StrafeL)
	UnregisterForKey(StrafeR)
EndIf
EndFunction

Function Restore()
	Time = 0
	SoundTime = 0
	StruggleBarDisplay(False)
	GotoState("")
EndFunction

EndState

State ConstantPainExpression

	Event OnBeginState()
		RegisterForSingleUpdate(30.0)
	EndEvent

	Event OnUpdate()
		CustomMFGPain(PlayerRef, Utility.randomint(1, 8))
		RegisterForSingleUpdate(30.0)
	EndEvent

Function Restore()
	UnregisterForUpdate()
	GotoState("")
EndFunction

EndState
